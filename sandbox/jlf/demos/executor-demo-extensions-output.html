<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- This file was created with the aha Ansi HTML Adapter. https://github.com/theZiz/aha -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="application/xml+xhtml; charset=UTF-8"/>
<title>stdin</title>
</head>
<body>
<pre>
<span style="font-weight:bold;color:green;">loadPackage OK for extension/extensions.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for rxunixsys
</span><span style="font-weight:bold;color:green;">loadPackage OK for ncurses.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for csvStream.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for hostemu
</span><span style="font-weight:bold;color:green;">loadPackage OK for json.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for mime.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for rxftp.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for rxmath
</span><span style="font-weight:bold;color:green;">loadPackage OK for rxregexp.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for regex/regex.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for smtp.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for socket.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for streamsocket.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for pipeline/pipe.rex
</span><span style="font-weight:bold;color:green;">loadPackage OK for rgf_util2/rgf_util2.rex
</span><span style="font-weight:bold;color:green;">loadPackage OK for BSF.CLS
</span><span style="font-weight:bold;color:green;">loadPackage OK for oorexxshell_queries.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for pipeline/pipe_extension.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for rgf_util2/rgf_util2_wrappers.rex
</span><span style="font-weight:bold;color:green;">
</span><span style="font-weight:bold;color:green;">REXX-ooRexx_4.3.0(MT)_64-bit 6.04 15 Jul 2021
</span><span style="font-weight:bold;color:green;">Input queue name: S9392Q7fd448430660
</span>
<span style="color:blue;">----------------------
</span><span style="color:blue;">-- Executor extensions
</span><span style="color:blue;">----------------------
</span>
<span style="color:blue;">The directive ::EXTENSION delegates to the methods .class~define and .class~inherit.
</span><span style="color:blue;">The changes are allowed on predefined classes, and are propagated to existing instances.
</span><span style="color:blue;">
</span><span style="color:blue;">&gt;&gt;-::EXTENSION--classname----+-------------------+-----------------&gt;&lt;
</span><span style="color:blue;">                             +-INHERIT--iclasses-+
</span><span style="color:blue;">
</span><span style="color:blue;">Examples of extensions:
</span><span style="color:blue;">
</span><span style="color:blue;">::extension Array       inherit ArrayInitializer ArrayPrettyPrinter
</span><span style="color:blue;">
</span><span style="color:blue;">::extension Object
</span><span style="color:blue;">::method isNil
</span><span style="color:blue;">    return self == .nil
</span>
<span style="color:blue;">-- Query listing all the methods added by extension on the class String
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; ?cmi string &lt;&gt; (rexx)

<span style="font-weight:bold;color:green;">[Info] [1] Class 'String' P. (REXX)
</span>PM P.G.    '?'                    : 'LogicalExtension' (logical.cls)
P. P.G.    'ABBREV2'              : 'String' (rgf_util2_wrappers.rex)
PM PCG.    'ALNUM'                : 'StringCompatibilityWithOORexx5' (string.cls)
PM PCG.    'ALPHA'                : 'StringCompatibilityWithOORexx5' (string.cls)
PM P...    'ARITY'                : 'Doer' (doers.cls)
PM PCG.    'BLANK'                : 'StringCompatibilityWithOORexx5' (string.cls)
P. P.G.    'CALL'                 : 'String' (rgf_util2_wrappers.rex)
PM P.G.    'CASELESSCONTAINS'     : 'StringCompatibilityWithOORexx5' (string.cls)
PM P.G.    'CASELESSENDSWITH'     : 'StringCompatibilityWithOORexx5' (string.cls)
PM P.G.    'CASELESSSPLIT'        : 'StringHelpers' (string.cls)
PM P.G.    'CASELESSSTARTSWITH'   : 'StringCompatibilityWithOORexx5' (string.cls)
P. P.G.    'CHANGESTR2'           : 'String' (rgf_util2_wrappers.rex)
PM PCG.    'CNTRL'                : 'StringCompatibilityWithOORexx5' (string.cls)
P. P.G.    'COMPARE2'             : 'String' (rgf_util2_wrappers.rex)
PM PCG.    'COMPOSE'              : 'Doer' (doers.cls)
PM P.G.    'CONCATENATESEPARATED' : 'StringHelpers' (string.cls)
PM P.G.    'CONTAINS'             : 'StringCompatibilityWithOORexx5' (string.cls)
P. P...    'COPIPE'               : 'Object' (pipe_extension.cls)
P. PC..    'COPIPE'               : 'Object' (pipe_extension.cls)
P. P...    'COPIPEPROFILE'        : 'Object' (pipe_extension.cls)
.M P.G.    'COPY'                 : 'EncodedString' (string.cls)
P. P.G.    'COUNTSTR2'            : 'String' (rgf_util2_wrappers.rex)
P. PCG.    'CR'                   : 'String' (CoreClasses.orx)
P. P.G.    'DELSTR2'              : 'String' (rgf_util2_wrappers.rex)
P. P.G.    'DELWORD2'             : 'String' (rgf_util2_wrappers.rex)
P. P.G.    'DEPTH'                : 'Object' (array.cls)
PM PCG.    'DIGIT'                : 'StringCompatibilityWithOORexx5' (string.cls)
P. P.G.    'DISCLOSE'             : 'Object' (array.cls)
PM P...    'DO'                   : 'StringDoer' (doers.cls)
PM P.G.    'DO'                   : 'Doer' (doers.cls)
PM P...    'DOER'                 : 'StringDoer' (doers.cls)
PM P.G.    'DOER'                 : 'DoerFactory' (doers.cls)
PM P...    'DOPASSNAMEDARGUMENTS' : 'Doer' (doers.cls)
PM P...    'DOWITH'               : 'StringDoer' (doers.cls)
PM P.G.    'DOWITH'               : 'Doer' (doers.cls)
PM P...    'DOWNTO'               : 'RepeaterCollector' (functionals.cls)
PM P...    'DROPC'                : 'StringFilter' (functionals.cls)
PM P...    'DROPCI'               : 'StringFilter' (functionals.cls)
PM P...    'DROPFIRSTC'           : 'StringFilter' (functionals.cls)
PM P...    'DROPFIRSTCI'          : 'StringFilter' (functionals.cls)
PM P...    'DROPFIRSTW'           : 'StringFilter' (functionals.cls)
PM P...    'DROPFIRSTWI'          : 'StringFilter' (functionals.cls)
PM P...    'DROPLASTC'            : 'StringFilter' (functionals.cls)
PM P...    'DROPLASTCI'           : 'StringFilter' (functionals.cls)
PM P...    'DROPLASTW'            : 'StringFilter' (functionals.cls)
PM P...    'DROPLASTWI'           : 'StringFilter' (functionals.cls)
PM P...    'DROPUNTILC'           : 'StringFilter' (functionals.cls)
PM P...    'DROPUNTILCI'          : 'StringFilter' (functionals.cls)
PM P...    'DROPUNTILW'           : 'StringFilter' (functionals.cls)
PM P...    'DROPUNTILWI'          : 'StringFilter' (functionals.cls)
PM P...    'DROPW'                : 'StringFilter' (functionals.cls)
PM P...    'DROPWHILEC'           : 'StringFilter' (functionals.cls)
PM P...    'DROPWHILECI'          : 'StringFilter' (functionals.cls)
PM P...    'DROPWHILEW'           : 'StringFilter' (functionals.cls)
PM P...    'DROPWHILEWI'          : 'StringFilter' (functionals.cls)
PM P...    'DROPWI'               : 'StringFilter' (functionals.cls)
P. P.G.    'DUMP2'                : 'Object' (rgf_util2_wrappers.rex)
P. P.G.    'EACH'                 : 'Object' (array.cls)
PM P...    'EACHC'                : 'StringIterator' (functionals.cls)
PM P...    'EACHCI'               : 'StringIterator' (functionals.cls)
PM P...    'EACHW'                : 'StringIterator' (functionals.cls)
PM P...    'EACHWI'               : 'StringIterator' (functionals.cls)
P. P.G.    'ENCLOSE'              : 'Object' (array.cls)
PM P.G.    'ENDSWITH'             : 'StringCompatibilityWithOORexx5' (string.cls)
P. P.G.    'ENQUOTE2'             : 'String' (rgf_util2_wrappers.rex)
P. P.G.    'ESCAPE2'              : 'String' (rgf_util2_wrappers.rex)
P. P.G.    'GENERATE'             : 'Object' (generator.cls)
P. PCG.    'GENERATE'             : 'Object' (generator.cls)
PM P...    'GENERATE.DOWNTO'      : 'RepeaterGenerator' (generator.cls)
PM P...    'GENERATE.UPTO'        : 'RepeaterGenerator' (generator.cls)
PM P...    'GENERATEC'            : 'StringGenerator' (generator.cls)
PM P...    'GENERATECI'           : 'StringGenerator' (generator.cls)
P. PCG.    'GENERATEI'            : 'Object' (generator.cls)
P. P.G.    'GENERATEI'            : 'Object' (generator.cls)
PM P...    'GENERATEW'            : 'StringGenerator' (generator.cls)
PM P...    'GENERATEWI'           : 'StringGenerator' (generator.cls)
P. P.G.    'GETUSERDATA'          : 'Object' (extensions.cls)
PM P...    'GO'                   : 'Doer' (doers.cls)
PM P...    'GOWITH'               : 'Doer' (doers.cls)
PM PCG.    'GRAPH'                : 'StringCompatibilityWithOORexx5' (string.cls)
.M P.G.    'HASTEXT'              : 'EncodedString' (string.cls)
PM P...    'IFFALSE'              : 'LogicalExtension' (logical.cls)
PM P...    'IFTRUE'               : 'LogicalExtension' (logical.cls)
P. P.G.    'ISNIL'                : 'Object' (extensions.cls)
P. P.G.    'LASTPOS2'             : 'String' (rgf_util2_wrappers.rex)
P. P.G.    'LEFT2'                : 'String' (rgf_util2_wrappers.rex)
PM PCG.    'LOWER'                : 'StringCompatibilityWithOORexx5' (string.cls)
P. P.G.    'LOWER2'               : 'String' (rgf_util2_wrappers.rex)
PM P.G.    'MAKECOMPLEX'          : 'ComplexString' (complex.cls)
.M P.G.    'MAKEREXXTEXT'         : 'EncodedString' (string.cls)
PM P...    'MAPC'                 : 'StringMapper' (functionals.cls)
PM P...    'MAPW'                 : 'StringMapper' (functionals.cls)
PM P...    'NEEDSOBJECT'          : 'StringDoer' (doers.cls)
PM P.G.    'NEEDSOBJECT'          : 'Doer' (doers.cls)
P. PCG.    'NL'                   : 'String' (CoreClasses.orx)
P. PCG.    'NULL'                 : 'String' (CoreClasses.orx)
P. P.G.    'OVERLAY2'             : 'String' (rgf_util2_wrappers.rex)
P. P.G.    'PARSEWORDS2'          : 'String' (rgf_util2_wrappers.rex)
PM P...    'PARTIAL'              : 'Doer' (doers.cls)
P. PC..    'PIPE'                 : 'Object' (pipe_extension.cls)
P. P...    'PIPE'                 : 'Object' (pipe_extension.cls)
P. P...    'PIPEPROFILE'          : 'Object' (pipe_extension.cls)
P. P.G.    'POS2'                 : 'String' (rgf_util2_wrappers.rex)
PM P.G.    'POSIXCLASSCHARACTERS' : 'StringHelpers' (string.cls)
P. P.G.    'PP2'                  : 'Object' (rgf_util2_wrappers.rex)
P. P.G.    'PPINDEX2'             : 'Object' (rgf_util2_wrappers.rex)
P. PCG.    'PPSTRING'             : 'Object' (extensions.cls)
PM P.G.    'PPSTRING'             : 'StringPrettyPrinter' (string.cls)
P. P.G.    'PPSTRING'             : 'Object' (extensions.cls)
PM PCG.    'PRINT'                : 'StringCompatibilityWithOORexx5' (string.cls)
PM PCG.    'PUNCT'                : 'StringCompatibilityWithOORexx5' (string.cls)
PM P.G.    'QUOTED'               : 'StringHelpers' (string.cls)
P. P.G.    'RANK'                 : 'Object' (array.cls)
PM P...    'REDUCEC'              : 'StringReducer' (functionals.cls)
PM P...    'REDUCEW'              : 'StringReducer' (functionals.cls)
PM P...    'REJECTC'              : 'StringFilter' (functionals.cls)
PM P...    'REJECTCI'             : 'StringFilter' (functionals.cls)
PM P...    'REJECTW'              : 'StringFilter' (functionals.cls)
PM P...    'REJECTWI'             : 'StringFilter' (functionals.cls)
P. P.G.    'RESHAPE'              : 'Object' (array.cls)
P. P.G.    'RIGHT2'               : 'String' (rgf_util2_wrappers.rex)
PM P...    'SELECTC'              : 'StringFilter' (functionals.cls)
PM P...    'SELECTCI'             : 'StringFilter' (functionals.cls)
PM P...    'SELECTW'              : 'StringFilter' (functionals.cls)
PM P...    'SELECTWI'             : 'StringFilter' (functionals.cls)
P. P.G.    'SETMETHOD1'           : 'Object' (SETMETHOD1)
P. P.G.    'SETUSERDATA'          : 'Object' (extensions.cls)
P. P.G.    'SHAPE'                : 'Object' (array.cls)
P. P.G.    'SHAPETOSTRING'        : 'Object' (array.cls)
PM P.G.    'SINGULARPLURAL'       : 'StringHelpers' (string.cls)
PM P.G.    'SINGULARPLURALCOUNT'  : 'StringHelpers' (string.cls)
PM P.G.    'SOURCE'               : 'Doer' (doers.cls)
PM P...    'SOURCE'               : 'StringDoer' (doers.cls)
PM PCG.    'SPACE'                : 'StringCompatibilityWithOORexx5' (string.cls)
PM P.G.    'SPLIT'                : 'StringHelpers' (string.cls)
PM P.G.    'STARTSWITH'           : 'StringCompatibilityWithOORexx5' (string.cls)
P. P.G.    'SUBCHAR2'             : 'String' (rgf_util2_wrappers.rex)
P. P.G.    'SUBSTR2'              : 'String' (rgf_util2_wrappers.rex)
P. P.G.    'SUBWORD2'             : 'String' (rgf_util2_wrappers.rex)
P. PCG.    'TAB'                  : 'String' (CoreClasses.orx)
PM P...    'TAKEC'                : 'StringFilter' (functionals.cls)
PM P...    'TAKECI'               : 'StringFilter' (functionals.cls)
PM P...    'TAKEFIRSTC'           : 'StringFilter' (functionals.cls)
PM P...    'TAKEFIRSTCI'          : 'StringFilter' (functionals.cls)
PM P...    'TAKEFIRSTW'           : 'StringFilter' (functionals.cls)
PM P...    'TAKEFIRSTWI'          : 'StringFilter' (functionals.cls)
PM P...    'TAKELASTC'            : 'StringFilter' (functionals.cls)
PM P...    'TAKELASTCI'           : 'StringFilter' (functionals.cls)
PM P...    'TAKELASTW'            : 'StringFilter' (functionals.cls)
PM P...    'TAKELASTWI'           : 'StringFilter' (functionals.cls)
PM P...    'TAKEUNTILC'           : 'StringFilter' (functionals.cls)
PM P...    'TAKEUNTILCI'          : 'StringFilter' (functionals.cls)
PM P...    'TAKEUNTILW'           : 'StringFilter' (functionals.cls)
PM P...    'TAKEUNTILWI'          : 'StringFilter' (functionals.cls)
PM P...    'TAKEW'                : 'StringFilter' (functionals.cls)
PM P...    'TAKEWHILEC'           : 'StringFilter' (functionals.cls)
PM P...    'TAKEWHILECI'          : 'StringFilter' (functionals.cls)
PM P...    'TAKEWHILEW'           : 'StringFilter' (functionals.cls)
PM P...    'TAKEWHILEWI'          : 'StringFilter' (functionals.cls)
PM P...    'TAKEWI'               : 'StringFilter' (functionals.cls)
.M P.G.    'TEXT'                 : 'EncodedString' (string.cls)
.M P.G.    'TEXT='                : 'EncodedString' (string.cls)
PM P...    'TIMES'                : 'RepeaterCollector' (functionals.cls)
PM P...    'TIMES.GENERATE'       : 'RepeaterGenerator' (generator.cls)
PM P...    'TRAMPOLINE'           : 'Doer' (doers.cls)
P. P...    'UNKNOWN'              : 'Object' (extensions.cls)
PM P...    'UNKNOWN'              : 'RepeaterCollector' (functionals.cls)
PM P.G.    'UNQUOTED'             : 'StringHelpers' (string.cls)
PM P...    'UNTILC'               : 'StringFilter' (functionals.cls)
PM P...    'UNTILCI'              : 'StringFilter' (functionals.cls)
PM P...    'UNTILW'               : 'StringFilter' (functionals.cls)
PM P...    'UNTILWI'              : 'StringFilter' (functionals.cls)
PM PCG.    'UPPER'                : 'StringCompatibilityWithOORexx5' (string.cls)
P. P.G.    'UPPER2'               : 'String' (rgf_util2_wrappers.rex)
PM P...    'UPTO'                 : 'RepeaterCollector' (functionals.cls)
PM P...    'WHILEC'               : 'StringFilter' (functionals.cls)
PM P...    'WHILECI'              : 'StringFilter' (functionals.cls)
PM P...    'WHILEW'               : 'StringFilter' (functionals.cls)
PM P...    'WHILEWI'              : 'StringFilter' (functionals.cls)
P. P.G.    'WORD2'                : 'String' (rgf_util2_wrappers.rex)
P. P.G.    'WORDINDEX2'           : 'String' (rgf_util2_wrappers.rex)
P. P.G.    'WORDLENGTH2'          : 'String' (rgf_util2_wrappers.rex)
P. P.G.    'WORDPOS2'             : 'String' (rgf_util2_wrappers.rex)
PM PCG.    'XDIGIT'               : 'StringCompatibilityWithOORexx5' (string.cls)
PM P.G.    '[]'                   : 'StringCompatibilityWithOORexx5' (string.cls)
PM P...    '~()'                  : 'Doer' (doers.cls)
<span style="font-weight:bold;color:green;">[Info] [1] Class 'String' has 358 methods
</span><span style="font-weight:bold;color:green;">[Info] 189 lines displayed
</span>
<span style="color:blue;">Blocks
</span><span style="color:blue;">A RexxBlock is a piece of source code surrounded by curly brackets.
</span><span style="color:blue;">{say &quot;Hello&quot;}
</span><span style="color:blue;">
</span><span style="color:blue;">Optional tags after &quot;{&quot;:
</span><span style="color:blue;">::routine       (abbreviation ::r, this is the default tag)
</span><span style="color:blue;">::coactivity    (abbreviation ::co)
</span><span style="color:blue;">
</span><span style="color:blue;">Big picture :
</span><span style="color:blue;">A RexxSourceLiteral is an internal rexx object, created by the parser, not accessible from ooRexx scripts.
</span><span style="color:blue;">A RexxSourceLiteral holds the following properties, shared among all the RexxBlock instances created from it :
</span><span style="color:blue;">- source: the text between the curly brackets {...} as an array of lines, including the tag ::xxx if any.
</span><span style="color:blue;">- package: the package which contain the source literal.
</span><span style="color:blue;">- kind: kind of source, derived from the source's tag.
</span><span style="color:blue;">- rawExecutable: routine or method created at load-time (immediate parsing).
</span><span style="color:blue;">- executable: cached executable.
</span><span style="color:blue;">A RexxBlock is created each time the RexxSourceLiteral is evaluated, and is accessible from ooRexx scripts.
</span><span style="color:blue;">When a RexxBlock is a closure's source, it will hold a snapshot of the context's variables.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; ?cm RexxBlock

<span style="font-weight:bold;color:green;">[Info] [1] Class 'RexxBlock' P. (REXX)
</span>P. P.G.    'COPY'          : 'RexxBlock' (REXX)
P. P.G.    'KIND'          : 'RexxBlock' (REXX)
P. PCG.    'NEW'           : 'RexxBlock' (REXX)
P. P.G.    'PACKAGE'       : 'RexxBlock' (REXX)
P. P.G.    'RAWEXECUTABLE' : 'RexxBlock' (REXX)
P. P.G.    'SOURCE'        : 'RexxBlock' (REXX)
P. P.G.    'VARIABLES'     : 'RexxBlock' (REXX)
<span style="font-weight:bold;color:green;">[Info] [1] Class 'RexxBlock' has 7 methods
</span><span style="font-weight:bold;color:green;">[Info] 10 lines displayed
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; block = {say &quot;Hello&quot;}
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; block~rawExecutable=
(a Routine)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; block~executable=               <span style="color:blue;">-- not yet executed, the cache is empty</span>
(The NIL object)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; block~do
Hello
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; block~executable=               <span style="color:blue;">-- now the cache has a value: a Routine</span>
(a Routine)

<span style="color:blue;">Tilde-call message &quot;~()&quot;.
</span><span style="color:blue;">The message name can be omitted, but the list of parameters is mandatory (can be empty).
</span><span style="color:blue;">    target~()
</span><span style="color:blue;">    target~(arg1, arg2, ...)
</span><span style="color:blue;">    target~~()
</span><span style="color:blue;">    target~~(arg1, arg2, ...)
</span><span style="color:blue;">When the expression is evaluated, the target receives the message &quot;~()&quot; which
</span><span style="color:blue;">forwards the message &quot;do&quot;.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; {say &quot;hello&quot;}~()
hello
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; ?m do                           <span style="color:blue;">-- classes supporting the message &quot;do&quot;</span>
P. P.G.    'CLASSES' : 'Package' (REXX)
PM P.G.    'DO'      : 'Doer' (doers.cls)
PM P...    'DO'      : 'CoactivityDoer' (doers.cls)
PM P...    'DO'      : 'MethodDoer' (doers.cls)
PM P...    'DO'      : 'RexxBlockDoer' (doers.cls)
PM P...    'DO'      : 'RoutineDoer' (doers.cls)
PM P...    'DO'      : 'StringDoer' (doers.cls)
.. P.G.    'MESSAGE' : 'MESSAGEPROFILEDATA' (profiling.cls)
<span style="font-weight:bold;color:green;">[Info] 8 lines displayed
</span>
<span style="color:blue;">Trailing block argument (similar to Groovy &amp; Swift syntax for closures) :
</span><span style="color:blue;">    f{...} is equivalent to f({...})
</span><span style="color:blue;">    f(a1,a2,...){...} is equivalent to f(a1,a2,...,{...})
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 10~times{2 * arg(1)}=
[ 2, 4, 6, 8, 10, 12, 14, 16, 18, 20]

<span style="color:blue;">Named arguments
</span><span style="color:blue;">They have been added because they allow to get rid of the transformation of the
</span><span style="color:blue;">block's sources at run-time (to declare positional arguments like item, index).
</span><span style="color:blue;">More precisely, this instruction:
</span><span style="color:blue;">    use auto named args
</span><span style="color:blue;">lets the caller inject named variables in the scope of the callee.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; {use auto named arg; say n1 n2 n3; .context~namedArgs}~(n1:1, n2:2, n3:3)=
1 2 3
a Directory (3 items)
'N1' :  1
'N2' :  2
'N3' :  3

<span style="color:blue;">-- An auto named argument never overwrites a variable already assigned
</span><span style="color:blue;">-- Here, n1 is not overwritten with 1
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; {n1=10; use auto named arg; say n1 n2 n3; .context~namedArgs}~(n1:1, n2:2, n3:3)=
10 2 3
a Directory (3 items)
'N1' :  1
'N2' :  2
'N3' :  3

<span style="color:blue;">At parse-time, the source is transformed to accept auto named arguments, and to
</span><span style="color:blue;">return implicitely the result of the last evaluated expression.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; block = {say &quot;Hello&quot;}
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; block~source=
['say &quot;Hello&quot;']
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; block~rawExecutable~source==
an Array (shape [2], 2 items)
 1 : 'use auto named arg ; options &quot;NOCOMMANDS&quot; ; say &quot;Hello&quot;'
 2 : 'if var(&quot;result&quot;) then return result'

<span style="color:blue;">By convention, the higher-order functions are passing the named parameters
</span><span style="color:blue;">&quot;item&quot; and &quot;index&quot;. Their values are also passed as positional arguments.
</span><span style="color:blue;">The callee has the choice: using the auto named arguments, or using the positional
</span><span style="color:blue;">arguments. The callee has a total control over which arguments he accepts.
</span><span style="color:blue;">If its constraints on positional and/or named arguments are incompatible with
</span><span style="color:blue;">the expectations of the higher-order function then an error will be raised.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 10~times{use strict arg v; 2 * v}=  <span style="color:blue;">-- Not compatible, an error is raised</span>
<span style="font-weight:bold;color:red;">Too many positional arguments in invocation of &lt;anonymous&gt;; maximum expected is 1.
</span><span style="font-weight:bold;color:red;">Error code= 40.4
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 10~times{use arg v; 2 * v}=         <span style="color:blue;">-- Compatible</span>
[ 2, 4, 6, 8, 10, 12, 14, 16, 18, 20]
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 10~times{2 * item}=                 <span style="color:blue;">-- No need to declare &quot;item&quot;</span>
[ 2, 4, 6, 8, 10, 12, 14, 16, 18, 20]

<span style="color:blue;">The arity is -1 (unknown) for all the doers, except for the blocks for which
</span><span style="color:blue;">the arity is 9999 (unlimited).
</span><span style="color:blue;">The arity is used by the higher-order functions, to decide which parameters
</span><span style="color:blue;">can be passed. For the operators, only 2 positional parameters must be passed.
</span><span style="color:blue;">
</span><span style="color:blue;">For example, the implementation of ~reduce:
</span><span style="color:blue;">do while self~available
</span><span style="color:blue;">    if arity &gt;=3 then doer~do(      accu,       self~item,        self~index,-
</span><span style="color:blue;">                              accu: accu, item: self~item, index: self~index)
</span><span style="color:blue;">                 else doer~do(      accu,       self~item,-
</span><span style="color:blue;">                              accu: accu, item: self~item)
</span><span style="color:blue;">    if var(&quot;result&quot;) then accu = result
</span><span style="color:blue;">    self~next
</span><span style="color:blue;">end
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; (10,20,30)~reduce(&quot;+&quot;)=                                 <span style="color:blue;">-- case arity &lt; 3</span>
 60
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; (10,20,30)~reduce(initial:0){accu + item ** index}=     <span style="color:blue;">-- case arity &gt;= 3</span>
 27410

<span style="color:blue;">Closure
</span><span style="color:blue;">A closure is an object, created from a block whose source first word after the
</span><span style="color:blue;">optional tag is &quot;expose&quot;.
</span><span style="color:blue;">
</span><span style="color:blue;">A closure remembers the values of the variables defined in the outer environment
</span><span style="color:blue;">of the block. The behaviour of the closure is a method generated from the block,
</span><span style="color:blue;">which is attached to the closure under the name &quot;do&quot;. The values of the captured
</span><span style="color:blue;">variables are accessible from this method &quot;do&quot; using expose. Updating a variable
</span><span style="color:blue;">from the closure will have no impact on the original context (hence the name
</span><span style="color:blue;">&quot;closure by value&quot;).
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; newCounter={use arg n=0; {expose n; use arg i=0; n+=i; n}}
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; counter1 = newCounter~()        <span style="color:blue;">-- start at 0 (default)</span>
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; counter2 = newCounter~(20)      <span style="color:blue;">-- start at 20</span>
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; counter1~() counter2~()=        <span style="color:blue;">-- 0 20</span>
'0 20'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; do 5; counter1~(+1); counter2~(-2); end
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; counter1~() counter2~()=        <span style="color:blue;">-- 5 10</span>
'5 10'

<span style="color:blue;">Coactivity
</span><span style="color:blue;">Emulation of coroutine, named &quot;coactivity&quot; to follow the ooRexx vocabulary.
</span><span style="color:blue;">This is not a &quot;real&quot; coroutine implementation, because it's based on ooRexx
</span><span style="color:blue;">threads and synchronization. But at least you have all the functionalities of a
</span><span style="color:blue;">stackful asymmetric coroutine (resume + yield).
</span><span style="color:blue;">
</span><span style="color:blue;">A stackful coroutine is a coroutine able to suspend its execution from within
</span><span style="color:blue;">nested calls. The variable .threadLocal is used to retrieve the coactivity
</span><span style="color:blue;">instance from any invocation and send it the message yield (this instance is at
</span><span style="color:blue;">the origin of the invocations stack, but is not passed as a parameter to the
</span><span style="color:blue;">invocations).
</span><span style="color:blue;">myCoactivity~start  &lt;--------------+
</span><span style="color:blue;">    invocation                     |
</span><span style="color:blue;">        invocation                 |
</span><span style="color:blue;">            ...                    |
</span><span style="color:blue;">                invocation: .Coactivity~yield()
</span><span style="color:blue;">
</span><span style="color:blue;">A coactivity remembers its internal state. It can be called several times, the
</span><span style="color:blue;">execution is resumed after the last executed &quot;.yield[]&quot; or &quot;call yield&quot;.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; generator = {::coactivity i=0; do forever; call yield i; i+=1; end}
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; generator~()=
 0
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; generator~makeArray(10)=
[ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; generator~()=
 11

<span style="color:blue;">Concurrency trace
</span><span style="color:blue;">The interpreter has been modified to add thread id, activation id, variable's dictionnary id,
</span><span style="color:blue;">lock counter and lock flag in the lines printed by trace.
</span><span style="color:blue;">Concurrency trace is displayed only when env variable RXTRACE_CONCURRENCY=ON
</span><span style="color:blue;">
</span><span style="color:blue;">Informations that are displayed.
</span><span style="color:blue;">RexxActivity::traceOutput(RexxActivation *activation, ...
</span><span style="color:blue;">T1       SysCurrentThreadId(),
</span><span style="color:blue;">A2       (unsigned int)activation,
</span><span style="color:blue;">V1       (activation) ? activation-&gt;getVariableDictionary() : NULL      // settings.object_variables
</span><span style="color:blue;">1        (activation) ? activation-&gt;getReserveCount() : 0               // settings.object_variables-&gt;getReserveCount()
</span><span style="color:blue;">*        (activation &amp;&amp; activation-&gt;isObjectScopeLocked()) ? '*' : ' ') // object_scope == SCOPE_RESERVED
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; <span style="color:blue;">-- Raw output, not easy to read
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; system RXTRACE_CONCURRENCY=ON rexx concurrency_trace.rex
0000000092c58380 000000000186c430 0000000000000000 00000       1 *-* .demo~new~exec(id:1)
0000000092c58380 000000000186c430 0000000000000000 00000         &gt;E&gt;   .DEMO =&gt; &quot;The DEMO class&quot;
0000000092c58380 000000000186c430 0000000000000000 00000         &gt;M&gt;   &quot;NEW&quot; =&gt; &quot;a DEMO&quot;
0000000092c58380 000000000186c430 0000000000000000 00000         &gt;N&gt;   &quot;ID&quot;
0000000092c58380 000000000186c430 0000000000000000 00000         &gt;L&gt;   &quot;1&quot;
0000000092c58380 000000000186c430 0000000000000000 00000         &gt;A&gt;   &quot;1&quot;
0000000092c58380 0000000001a9c130 0000000001ec28b0 00000         &gt;I&gt; Method &quot;EXEC&quot; with scope &quot;DEMO&quot; in package &quot;/local/rexx/oorexx/executor/sandbox/jlf/demos/concurrency_trace.rex&quot;.
0000000092c58380 0000000001a9c130 0000000001ec28b0 00001*      8 *-* use named arg id
0000000092c58380 0000000001a9c130 0000000001ec28b0 00001*        &gt;&gt;&gt;   &quot;1&quot;
0000000092c58380 0000000001a9c130 0000000001ec28b0 00001*        &gt;=&gt;   ID &lt;= &quot;1&quot;
0000000092c58380 0000000001a9c130 0000000001ec28b0 00001*      9 *-* reply
0000000092c58380 000000000186c430 0000000000000000 00000       2 *-* .demo~new~exec(id:2)
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;I&gt; Method &quot;EXEC&quot; with scope &quot;DEMO&quot; in package &quot;/local/rexx/oorexx/executor/sandbox/jlf/demos/concurrency_trace.rex&quot;.
0000000092c58380 000000000186c430 0000000000000000 00000         &gt;E&gt;   .DEMO =&gt; &quot;The DEMO class&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*     10 *-* do 2
0000000092c58380 000000000186c430 0000000000000000 00000         &gt;M&gt;   &quot;NEW&quot; =&gt; &quot;a DEMO&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;L&gt;     &quot;2&quot;
0000000092c58380 000000000186c430 0000000000000000 00000         &gt;N&gt;   &quot;ID&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;&gt;&gt;     &quot;2&quot;
0000000092c58380 000000000186c430 0000000000000000 00000         &gt;L&gt;   &quot;2&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*     11 *-*   say &quot;TASK&quot; id
0000000092c58380 000000000186c430 0000000000000000 00000         &gt;A&gt;   &quot;2&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;L&gt;     &quot;TASK&quot;
0000000092c58380 000000000194c3e0 0000000001e86470 00000         &gt;I&gt; Method &quot;EXEC&quot; with scope &quot;DEMO&quot; in package &quot;/local/rexx/oorexx/executor/sandbox/jlf/demos/concurrency_trace.rex&quot;.
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;V&gt;     ID =&gt; &quot;1&quot;
0000000092c58380 000000000194c3e0 0000000001e86470 00001*      8 *-* use named arg id
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;O&gt;     &quot; &quot; =&gt; &quot;TASK 1&quot;
0000000092c58380 000000000194c3e0 0000000001e86470 00001*        &gt;&gt;&gt;   &quot;2&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;&gt;&gt;     &quot;TASK 1&quot;
TASK 1
0000000092c58380 000000000194c3e0 0000000001e86470 00001*        &gt;=&gt;   ID &lt;= &quot;2&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*     12 *-*   call syssleep 1
0000000092c58380 000000000194c3e0 0000000001e86470 00001*      9 *-* reply
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;L&gt;     &quot;1&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;I&gt; Method &quot;EXEC&quot; with scope &quot;DEMO&quot; in package &quot;/local/rexx/oorexx/executor/sandbox/jlf/demos/concurrency_trace.rex&quot;.
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;A&gt;     &quot;1&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*     10 *-* do 2
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;L&gt;     &quot;2&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;&gt;&gt;     &quot;2&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*     11 *-*   say &quot;TASK&quot; id
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;L&gt;     &quot;TASK&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;V&gt;     ID =&gt; &quot;2&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;O&gt;     &quot; &quot; =&gt; &quot;TASK 2&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;&gt;&gt;     &quot;TASK 2&quot;
TASK 2
0000000008b98000 000000000194c3e0 0000000001e86470 00001*     12 *-*   call syssleep 1
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;L&gt;     &quot;1&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;A&gt;     &quot;1&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;&gt;&gt;     &quot;0&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;&gt;&gt;     &quot;0&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*     13 *-* end
0000000008b98000 000000000194c3e0 0000000001e86470 00001*     13 *-* end
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*     10 *-* do 2
0000000008b98000 000000000194c3e0 0000000001e86470 00001*     10 *-* do 2
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*     11 *-*   say &quot;TASK&quot; id
0000000008b98000 000000000194c3e0 0000000001e86470 00001*     11 *-*   say &quot;TASK&quot; id
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;L&gt;     &quot;TASK&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;L&gt;     &quot;TASK&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;V&gt;     ID =&gt; &quot;1&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;V&gt;     ID =&gt; &quot;2&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;O&gt;     &quot; &quot; =&gt; &quot;TASK 1&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;O&gt;     &quot; &quot; =&gt; &quot;TASK 2&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;&gt;&gt;     &quot;TASK 1&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;&gt;&gt;     &quot;TASK 2&quot;
TASK 1
TASK 2
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*     12 *-*   call syssleep 1
0000000008b98000 000000000194c3e0 0000000001e86470 00001*     12 *-*   call syssleep 1
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;L&gt;     &quot;1&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;L&gt;     &quot;1&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;A&gt;     &quot;1&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;A&gt;     &quot;1&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*        &gt;&gt;&gt;     &quot;0&quot;
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*     13 *-* end
0000000008b15000 0000000001a9c130 0000000001ec28b0 00001*     10 *-* do 2
0000000008b98000 000000000194c3e0 0000000001e86470 00001*        &gt;&gt;&gt;     &quot;0&quot;
0000000008b98000 000000000194c3e0 0000000001e86470 00001*     13 *-* end
0000000008b98000 000000000194c3e0 0000000001e86470 00001*     10 *-* do 2
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; <span style="color:blue;">-- Human-readable output, generated by piping the output through tracer.rex
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; system RXTRACE_CONCURRENCY=ON rexx concurrency_trace.rex 2&gt;&amp;1 | rexx trace/tracer.rex
T1   A1                     1 *-* .demo~new~exec(id:1)
T1   A1                       &gt;E&gt;   .DEMO =&gt; &quot;The DEMO class&quot;
T1   A1                       &gt;M&gt;   &quot;NEW&quot; =&gt; &quot;a DEMO&quot;
T1   A1                       &gt;N&gt;   &quot;ID&quot;
T1   A1                       &gt;L&gt;   &quot;1&quot;
T1   A1                       &gt;A&gt;   &quot;1&quot;
T1   A2     V1                &gt;I&gt; Method &quot;EXEC&quot; with scope &quot;DEMO&quot; in package &quot;/local/rexx/oorexx/executor/sandbox/jlf/demos/concurrency_trace.rex&quot;.
T1   A2     V1      1*      8 *-* use named arg id
T1   A2     V1      1*        &gt;&gt;&gt;   &quot;1&quot;
T1   A2     V1      1*        &gt;=&gt;   ID &lt;= &quot;1&quot;
T1   A2     V1      1*      9 *-* reply
T2   A2     V1      1*        &gt;I&gt; Method &quot;EXEC&quot; with scope &quot;DEMO&quot; in package &quot;/local/rexx/oorexx/executor/sandbox/jlf/demos/concurrency_trace.rex&quot;.
T1   A1                     2 *-* .demo~new~exec(id:2)
T2   A2     V1      1*     10 *-* do 2
T1   A1                       &gt;E&gt;   .DEMO =&gt; &quot;The DEMO class&quot;
T2   A2     V1      1*        &gt;L&gt;     &quot;2&quot;
T1   A1                       &gt;M&gt;   &quot;NEW&quot; =&gt; &quot;a DEMO&quot;
T2   A2     V1      1*        &gt;&gt;&gt;     &quot;2&quot;
T1   A1                       &gt;N&gt;   &quot;ID&quot;
T2   A2     V1      1*     11 *-*   say &quot;TASK&quot; id
T1   A1                       &gt;L&gt;   &quot;2&quot;
T2   A2     V1      1*        &gt;L&gt;     &quot;TASK&quot;
T1   A1                       &gt;A&gt;   &quot;2&quot;
T2   A2     V1      1*        &gt;V&gt;     ID =&gt; &quot;1&quot;
T1   A3     V2                &gt;I&gt; Method &quot;EXEC&quot; with scope &quot;DEMO&quot; in package &quot;/local/rexx/oorexx/executor/sandbox/jlf/demos/concurrency_trace.rex&quot;.
T2   A2     V1      1*        &gt;O&gt;     &quot; &quot; =&gt; &quot;TASK 1&quot;
T1   A3     V2      1*      8 *-* use named arg id
T2   A2     V1      1*        &gt;&gt;&gt;     &quot;TASK 1&quot;
TASK 1
T1   A3     V2      1*        &gt;&gt;&gt;   &quot;2&quot;
T2   A2     V1      1*     12 *-*   call syssleep 1
T1   A3     V2      1*        &gt;=&gt;   ID &lt;= &quot;2&quot;
T2   A2     V1      1*        &gt;L&gt;     &quot;1&quot;
T1   A3     V2      1*      9 *-* reply
T2   A2     V1      1*        &gt;A&gt;     &quot;1&quot;
T3   A3     V2      1*        &gt;I&gt; Method &quot;EXEC&quot; with scope &quot;DEMO&quot; in package &quot;/local/rexx/oorexx/executor/sandbox/jlf/demos/concurrency_trace.rex&quot;.
T3   A3     V2      1*     10 *-* do 2
T3   A3     V2      1*        &gt;L&gt;     &quot;2&quot;
T3   A3     V2      1*        &gt;&gt;&gt;     &quot;2&quot;
T3   A3     V2      1*     11 *-*   say &quot;TASK&quot; id
T3   A3     V2      1*        &gt;L&gt;     &quot;TASK&quot;
T3   A3     V2      1*        &gt;V&gt;     ID =&gt; &quot;2&quot;
T3   A3     V2      1*        &gt;O&gt;     &quot; &quot; =&gt; &quot;TASK 2&quot;
T3   A3     V2      1*        &gt;&gt;&gt;     &quot;TASK 2&quot;
TASK 2
T3   A3     V2      1*     12 *-*   call syssleep 1
T3   A3     V2      1*        &gt;L&gt;     &quot;1&quot;
T3   A3     V2      1*        &gt;A&gt;     &quot;1&quot;
T2   A2     V1      1*        &gt;&gt;&gt;     &quot;0&quot;
T2   A2     V1      1*     13 *-* end
T2   A2     V1      1*     10 *-* do 2
T2   A2     V1      1*     11 *-*   say &quot;TASK&quot; id
T2   A2     V1      1*        &gt;L&gt;     &quot;TASK&quot;
T2   A2     V1      1*        &gt;V&gt;     ID =&gt; &quot;1&quot;
T2   A2     V1      1*        &gt;O&gt;     &quot; &quot; =&gt; &quot;TASK 1&quot;
T2   A2     V1      1*        &gt;&gt;&gt;     &quot;TASK 1&quot;
TASK 1
T2   A2     V1      1*     12 *-*   call syssleep 1
T2   A2     V1      1*        &gt;L&gt;     &quot;1&quot;
T2   A2     V1      1*        &gt;A&gt;     &quot;1&quot;
T3   A3     V2      1*        &gt;&gt;&gt;     &quot;0&quot;
T3   A3     V2      1*     13 *-* end
T3   A3     V2      1*     10 *-* do 2
T3   A3     V2      1*     11 *-*   say &quot;TASK&quot; id
T3   A3     V2      1*        &gt;L&gt;     &quot;TASK&quot;
T3   A3     V2      1*        &gt;V&gt;     ID =&gt; &quot;2&quot;
T3   A3     V2      1*        &gt;O&gt;     &quot; &quot; =&gt; &quot;TASK 2&quot;
T3   A3     V2      1*        &gt;&gt;&gt;     &quot;TASK 2&quot;
TASK 2
T3   A3     V2      1*     12 *-*   call syssleep 1
T3   A3     V2      1*        &gt;L&gt;     &quot;1&quot;
T3   A3     V2      1*        &gt;A&gt;     &quot;1&quot;
T2   A2     V1      1*        &gt;&gt;&gt;     &quot;0&quot;
T2   A2     V1      1*     13 *-* end
T2   A2     V1      1*     10 *-* do 2
T3   A3     V2      1*        &gt;&gt;&gt;     &quot;0&quot;
T3   A3     V2      1*     13 *-* end
T3   A3     V2      1*     10 *-* do 2

<span style="color:blue;">Symetric implementation of operator
</span><span style="color:blue;">Official ooRexx doesn't allow to define symetric overriding of operators.
</span><span style="color:blue;">You can define a user operator on .array which supports .array~of(1,2) + 10.
</span><span style="color:blue;">But you can't define a user operator which supports 10 + .array~of(1,2).
</span><span style="color:blue;">
</span><span style="color:blue;">Executor has been extended to automatically try b~&quot;op:right&quot;(a) when a~&quot;op&quot;(b)
</span><span style="color:blue;">is about to raise an exception.
</span><span style="color:blue;">If an alternate implementation exists then call it otherwise raise the exception.
</span><span style="color:blue;">The two methods Object::messageSend have been modified to let pass an additional
</span><span style="color:blue;">parameter 'processUnknown' which is true by default (legacy behavior). When this
</span><span style="color:blue;">parameter is false, and no method is found for the message, then
</span><span style="color:blue;">Object::messageSend returns false to indicate that no implementation exists.
</span><span style="color:blue;">There is no processing of the unknown message.
</span><span style="color:blue;">This is an efficient way to test if an alternate implementation exists and call it.
</span><span style="color:blue;">When the alternate implementation returns nothing, then don't complain about that.
</span><span style="color:blue;">Behave as if the alternate implementation did not exist, and raise the exception
</span><span style="color:blue;">related to the left argument.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 1 + (10, 20)=                           <span style="color:blue;">-- array programming</span>
[ 11, 21]
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;hello&quot;~text~utf16 &quot;John&quot;~text~utf16=   <span style="color:blue;">-- encoded strings</span>
T'[00]h[00]e[00]l[00]l[00]o[00] [00]J[00]o[00]h[00]n'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 2*(3-2i)=                               <span style="color:blue;">-- complex numbers</span>
(6-4i)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; a = (1, 2); a~append(a); a=             <span style="color:blue;">-- self-referencing array, its depth is infinite</span>
a1=[ 1, 2,*a1]
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 1 + a~depth=                            <span style="color:blue;">-- arithmetic with infinity</span>
(The positive infinity)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 5 * (a~depth - a~depth)=                <span style="color:blue;">-- arithmetic with indeterminate</span>
(The indeterminate value)

<span style="color:blue;">Global variable
</span><span style="color:blue;">When a variable has no value, the interpreter sends the message &quot;NOVALUE&quot; to
</span><span style="color:blue;">the object registered in .LOCAL under the name &quot;NOVALUE&quot; (un-documented feature,
</span><span style="color:blue;">see RexxActivation::novalueHandler).
</span><span style="color:blue;">The class GlobalVariables is used to manage global variables like i, infinity, indeterminate.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; .local~novalue=
(The GlobalVariables class)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; ?cm globalvariables

<span style="font-weight:bold;color:green;">[Info] [1] Class 'GlobalVariables' P. (novalue.cls)
</span>P. PCG.    'DECLARE' : 'GlobalVariables' (novalue.cls)
P. PCG.    'INIT'    : 'GlobalVariables' (novalue.cls)
P. PCG.    'NOVALUE' : 'GlobalVariables' (novalue.cls)
P. PCG.    'VALUES'  : 'GlobalVariables' (novalue.cls)
<span style="font-weight:bold;color:green;">[Info] [1] Class 'GlobalVariables' has 4 methods
</span><span style="font-weight:bold;color:green;">[Info] 7 lines displayed
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; .globalvariables~values=
a Directory (4 items)
'COMPLEXINFINITY' : (The complex infinity)
'I'               : (0+1i)
'INDETERMINATE'   : (The indeterminate value)
'INFINITY'        : (The positive infinity)

<span style="color:blue;">-- -----------------------------------------------------------
</span><span style="color:blue;">--
</span><span style="color:blue;">-- Some examples of functionalities which depend on extensions
</span><span style="color:blue;">--
</span><span style="color:blue;">-- -----------------------------------------------------------
</span>

<span style="color:blue;">Range iterator
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 1~9=
[ 1, 2, 3, 4, 5, 6, 7, 8, 9]

<span style="color:blue;">The collection is displayed one item per line when the line ends with ==
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 1~9==
an Array (shape [9], 9 items)
 1 :  1
 2 :  2
 3 :  3
 4 :  4
 5 :  5
 6 :  6
 7 :  7
 8 :  8
 9 :  9

<span style="color:blue;">The precision of the range iterator is automatically adjusted
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 1~9(by:1e-100, for:10)==
an Array (shape [10], 10 items)
 1  :  1
 2  :  1.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001
 3  :  1.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002
 4  :  1.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003
 5  :  1.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004
 6  :  1.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
 7  :  1.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
 8  :  1.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007
 9  :  1.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008
 10 :  1.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009

<span style="color:blue;">To get the last 10 values of the range, pass for:-10
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 1~9(by:1e-100, for:-10)==
an Array (shape [10], 10 items)
 1  :  8.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991
 2  :  8.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999992
 3  :  8.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999993
 4  :  8.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999994
 5  :  8.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995
 6  :  8.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999996
 7  :  8.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999997
 8  :  8.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999998
 9  :  8.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
 10 :  9.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

<span style="color:blue;">Y combinator:
</span><span style="color:blue;">The Y combinator allows recursion to be defined as a set of rewrite rules.
</span><span style="color:blue;">It takes a single argument, which is a function that isn't recursive (here, no argument, use self which is a Doer).
</span><span style="color:blue;">It returns a version of the function which is recursive.
</span>
<span style="color:blue;">Inspired by http://mvanier.livejournal.com/2897.html
</span><span style="color:blue;">Y = f.(x.f (v.((x x) v))) (x.f (v.((x x) v)))
</span><span style="color:blue;">
</span><span style="color:blue;">(define Y
</span><span style="color:blue;">  (lambda (f)
</span><span style="color:blue;">    ( (lambda (a) (a a))
</span><span style="color:blue;">      (lambda (x) (f (lambda (v) ((x x) v)))))))
</span>
<span style="color:blue;">Implementation of the Y combinator with memoization:
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; ?ms YM
PM P...    'YM' : 'RoutineDoer' (doers.cls)
 &gt; 0001 use named arg verbose=.false
 &gt; 0002     if verbose then trace i
 &gt; 0003 
 &gt; 0004     -- lambda_f
 &gt; 0005     f = self -- to be closer to the notation (would be passed by parameter to lambda_f when implemented by a function instead of a method)
 &gt; 0006     YnamedArgs = .context~namedArgs
 &gt; 0007     table = .Table~new
 &gt; 0008 
 &gt; 0009     lambda_x = {
 &gt; 0010         expose f verbose YnamedArgs table
 &gt; 0011         if verbose then trace i
 &gt; 0012         use strict arg x
 &gt; 0013         lambda_v = {
 &gt; 0014                      expose x verbose table
 &gt; 0015                      if verbose then trace i
 &gt; 0016                      --use strict arg v
 &gt; 0017                      v = arg(1, &quot;a&quot;)
 &gt; 0018                      v_index = v~tostring
 &gt; 0019                      r = table[v_index]
 &gt; 0020                      if r &lt;&gt; .nil then return r
 &gt; 0021                      r = x~(x)~doWith(v, n:.context~namedArgs)
 &gt; 0022                      table[v_index] = r
 &gt; 0023                      return r
 &gt; 0024                 }
 &gt; 0025         return f ~ doWith(.array~of(lambda_v), n:YnamedArgs)
 &gt; 0026     }
 &gt; 0027     return lambda_x ~ (lambda_x)
<span style="font-weight:bold;color:green;">[Info] 28 lines displayed
</span>
<span style="color:blue;">Application to Fibonacci:
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; almost_fib = { use arg fib; {expose fib ; use arg n; if n==0 then return 0; if n==1 then return 1; if n&lt;0 then return fib~(n+2) - fib~(n+1); return fib~(n-2) + fib~(n-1)}}

<span style="color:blue;">The not-memoizing version needs around 15 sec.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; fib_Y = almost_fib~Y
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; fib_Y~(23)=
 28657
<span style="font-weight:bold;color:green;">Duration: 15.440066
</span><span style="font-weight:bold;color:green;">#Coactivities: 1
</span>
<span style="color:blue;">The memoizing version calculates almost instantly.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; fib_YM = almost_fib~YM
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; fib_YM~(23)=
 28657
<span style="font-weight:bold;color:green;">Duration: 0.005376
</span><span style="font-weight:bold;color:green;">#Coactivities: 1
</span>
<span style="color:blue;">fib_Y and fib_YM are closures.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; fib_YM~executable=
(a Closure)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; fib_YM~executable~variables=
a Directory (1 items)
'FIB' : (a RexxBlock)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; fib_YM~executable~variables[&quot;FIB&quot;]~executable=
(a Closure)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; fib_YM~executable~variables[&quot;FIB&quot;]~executable~variables=
a Directory (7 items)
'F'          : (a Routine)
'SELF'       : (a Closure)
'SUPER'      : (The Doer class)
'TABLE'      : a Table
'VERBOSE'    :  0
'X'          : (a RexxBlock)
'YNAMEDARGS' : a Directory

<span style="color:blue;">TABLE is the table of values memoized by fib_YM for the calculation of fib_YM~(23).
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; fib_YM~executable~variables[&quot;FIB&quot;]~executable~variables[&quot;TABLE&quot;]=
a Table (23 items)
 0  :  0
 1  :  1
 2  :  1
 3  :  2
 4  :  3
 5  :  5
 6  :  8
 7  :  13
 8  :  21
 9  :  34
 10 :  55
 11 :  89
 12 :  144
 13 :  233
 14 :  377
 15 :  610
 16 :  987
 17 :  1597
 18 :  2584
 19 :  4181
 20 :  6765
 21 :  10946
 22 :  17711

<span style="color:blue;">Both fib_Y and fib_YM are subject to stack overflow.
</span><span style="color:blue;">But fib_YM can be used by steps, to calculate very big fibonacci numbers, thanks to the memoization.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; numeric digits propagate 100
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; do i=1 to 500; r = fib_YM~(i*50); if i//50=0 then say &quot;fib_YM~(&quot;i*50&quot;)=&quot;r; end
fib_YM~(2500)=1.317090516751949629522763087125316412066606964992507141887746936727530870405038425764503130123186429E+522
fib_YM~(5000)=3.878968454388325633701916308325905312082127714646245106160597214895550139044037097010822916462210799E+1044
fib_YM~(7500)=1.142396523152058704722048892865690419848718663331756079795903059573826364358830526396432108051699207E+1567
fib_YM~(10000)=3.364476487643178326662161200510754331030214846068006390656476997468008144216666236815559551363373664E+2089
fib_YM~(12500)=9.908732919346489283972390155590053108590838370898511971634619406801520847007023935403361324320167010E+2611
fib_YM~(15000)=2.918224824204913830236407223698513202230962655711828774617138735156624458079183128895718558218554766E+3134
fib_YM~(17500)=8.594475392487880685715609318313958956965186135981014406583281854302591776880967478349722433509870025E+3656
fib_YM~(20000)=2.531162323732361242240155003520607291766356485802485278951929841991312781760541315230153423463759229E+4179
fib_YM~(22500)=7.454536101973301545514060322899628474921968473702388044321015228379740189148914655473430519859925903E+4701
fib_YM~(25000)=2.195438355517303012780791914841720922849015222302155773145178112730662303998294388326731046697794993E+5224
<span style="font-weight:bold;color:green;">Duration: 7.612608
</span><span style="font-weight:bold;color:green;">#Coactivities: 1
</span>
<span style="color:blue;">End of demonstration.
</span></pre>
</body>
</html>
