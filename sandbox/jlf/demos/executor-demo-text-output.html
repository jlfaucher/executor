<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- This file was created with the aha Ansi HTML Adapter. https://github.com/theZiz/aha -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="application/xml+xhtml; charset=UTF-8"/>
<title>stdin</title>
</head>
<body>
<pre>
<span style="font-weight:bold;color:green;">loadPackage OK for extension/extensions.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for rxunixsys
</span><span style="font-weight:bold;color:green;">loadPackage OK for ncurses.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for csvStream.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for hostemu
</span><span style="font-weight:bold;color:green;">loadPackage OK for json.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for mime.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for rxftp.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for rxmath
</span><span style="font-weight:bold;color:green;">loadPackage OK for rxregexp.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for regex/regex.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for smtp.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for socket.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for streamsocket.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for pipeline/pipe.rex
</span><span style="font-weight:bold;color:green;">loadPackage OK for rgf_util2/rgf_util2.rex
</span><span style="font-weight:bold;color:green;">loadPackage OK for BSF.CLS
</span><span style="font-weight:bold;color:green;">loadPackage OK for oorexxshell_queries.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for pipeline/pipe_extension.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for rgf_util2/rgf_util2_wrappers.rex
</span><span style="font-weight:bold;color:green;">
</span><span style="font-weight:bold;color:green;">REXX-ooRexx_4.3.0(MT)_64-bit 6.04 15 Jul 2021
</span><span style="font-weight:bold;color:green;">Input queue name: S10d5dQ100503c70
</span>
<span style="color:blue;">----------------
</span><span style="color:blue;">-- Text encoding
</span><span style="color:blue;">----------------
</span>
<span style="color:blue;">Start working on a prototype for encoded strings.
</span><span style="color:blue;">
</span><span style="color:blue;">Main ideas explored with this prototype :
</span><span style="color:blue;">- The existing String class is kept unchanged, but its semantic becomes : &quot;byte-oriented&quot;.
</span><span style="color:blue;">- The prototype adds a layer of services working at grapheme level, provided by the RexxText class.
</span><span style="color:blue;">- The RexxText class works on the bytes managed by the String class.
</span><span style="color:blue;">- String instances are immutable, the same for RexxText instances.
</span><span style="color:blue;">- No automatic conversion to Unicode by the interpreter.
</span><span style="color:blue;">- The strings crossing the I/O barriers are kept unchanged.
</span><span style="color:blue;">- Supported encodings : byte, UTF-8, UTF-16, UTF-32.
</span>
<span style="color:blue;">On my Mac, where locale returns :
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;locale&quot;
LANG=
LC_COLLATE=&quot;en_US.UTF-8&quot;
LC_CTYPE=&quot;en_US.UTF-8&quot;
LC_MESSAGES=&quot;en_US.UTF-8&quot;
LC_MONETARY=&quot;en_US.UTF-8&quot;
LC_NUMERIC=&quot;en_US.UTF-8&quot;
LC_TIME=&quot;en_US.UTF-8&quot;
LC_ALL=&quot;en_US.UTF-8&quot;

<span style="color:blue;">I get that under ooRexxShell :
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s1 = &quot;é&quot;
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s1=                                 <span style="color:blue;">-- 'é'</span>
'é'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s1~length=                          <span style="color:blue;">-- 2</span>
 2
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s1~c2x=                             <span style="color:blue;">-- C3 A9</span>
'C3A9'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; combining_acute_accent = &quot;cc81&quot;x
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s2 = &quot;e&quot; || combining_acute_accent
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s2=                                 <span style="color:blue;">-- 'é'</span>
'é'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s2~length=                          <span style="color:blue;">-- 3</span>
 3
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s2~c2x=                             <span style="color:blue;">-- 65 CC 81</span>
'65CC81'

<span style="color:blue;">My goal :
</span><span style="color:blue;">s1~text~length=                     -- 1 grapheme
</span><span style="color:blue;">s1~text~codepoints~count=           -- 1 codepoint
</span><span style="color:blue;">s1~text~string~length=              -- 2 bytes
</span><span style="color:blue;">
</span><span style="color:blue;">s2~text~length=                     -- 1 grapheme
</span><span style="color:blue;">s2~text~codepoints~count=           -- 2 codepoints
</span><span style="color:blue;">s2~text~string~length=              -- 3 bytes
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; 
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; .encoding~defaultEncoding = &quot;utf8&quot;
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s1~text~length=                     <span style="color:blue;">-- 1 grapheme</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s1~text~codepoints~count=           <span style="color:blue;">-- 1 codepoint</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s1~text~string~length=              <span style="color:blue;">-- 2 bytes</span>
 2

<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s2~text~length=                     <span style="color:blue;">-- 1 grapheme</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s2~text~codepoints~count=           <span style="color:blue;">-- 2 codepoints</span>
 2
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s2~text~string~length=              <span style="color:blue;">-- 3 bytes</span>
 3

<span style="color:blue;">A String is linked to a RexxText, which itself is linked to this String:
</span><span style="color:blue;">
</span><span style="color:blue;">    a String
</span><span style="color:blue;">     ▲  text --------⮸ a RexxText
</span><span style="color:blue;">     │                     indexer (anEncoding)
</span><span style="color:blue;">     │                          codepoints (sequential access)
</span><span style="color:blue;">     │                          graphemes  (direct access)
</span><span style="color:blue;">     +-----------------------⮷- string
</span><span style="color:blue;">
</span><span style="color:blue;">The ooRexx programmer has the choice :
</span><span style="color:blue;">- working with String at byte level
</span><span style="color:blue;">- working with RexxText at grapheme level.
</span><span style="color:blue;">- the same instance of String is used in both cases.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; myText = &quot;où as tu e&quot; || .Unicode~character(&quot;combining acute accent&quot;)~utf8 || &quot;té ?&quot;
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; myText=                         <span style="color:blue;">-- T'où as tu été ?'</span>
T'où as tu été ?'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; myString = myText~string
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; myString=                       <span style="color:blue;">-- 'où as tu été ?'</span>
'où as tu été ?'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; myString~length=                <span style="color:blue;">-- 18</span>
 18
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; myText~length=                  <span style="color:blue;">-- 14</span>
 14

<span style="color:blue;">                                -- 1  2  3  4  5  6  7  8  9  10 11 12 13 14 15 16 17 18
</span><span style="color:blue;">myString                        -- 6F C3 B9 20 61 73 20 74 75 20 65 CC 81 74 C3 A9 20 3F
</span><span style="color:blue;">                                -- o. ù....  . a. s.  . t. u.  . e. acute t. é....  . ?.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; myString~eachC(&quot;c2x&quot;)=
['6F','C3','B9', 20, 61, 73, 20, 74, 75, 20, 65,'CC', 81, 74,'C3','A9', 20,'3F']

<span style="color:blue;">                                -- 1  2     3  4  5  6  7  8  9  10       11 12    13 14
</span><span style="color:blue;">myText                          -- 6F C3B9  20 61 73 20 74 75 20 65 CC81  74 C3A9  20 3F
</span><span style="color:blue;">                                -- o. ù...   . a. s.  . t. u.  . e. acut  t. é...   . ?.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; myText~graphemes~each(&quot;c2x&quot;)=
['6F','C3B9', 20, 61, 73, 20, 74, 75, 20,'65 CC81', 74,'C3A9', 20,'3F']

<span style="color:blue;">CR+LF is a grapheme made of 2 codepoints.
</span><span style="color:blue;">LF+CR are 2 graphemes.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;0D0A&quot;x~text~description=
'UTF-8 ASCII (1 grapheme, 2 codepoints, 2 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;0A0D&quot;x~text~description=
'UTF-8 ASCII (2 graphemes, 2 codepoints, 2 bytes, 0 error)'

<span style="color:blue;">More examples of encoded string
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;( ͡° ͜ʖ﻿ ͡°)&quot;~text~description=
'UTF-8 not-ASCII (9 graphemes, 12 codepoints, 20 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;( ͡° ͜ʖ﻿ ͡°)&quot;~text~graphemes~each(&quot;c2x&quot;)=
[ 28,'20 CDA1','C2B0','20 CD9C','CA96','EFBBBF','20 CDA1','C2B0', 29]
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;( ͡° ͜ʖ﻿ ͡°)&quot;~text~codepoints~each{&quot;U+&quot;item~d2x}=
['U+28','U+20','U+361','U+B0','U+20','U+35C','U+296','U+FEFF','U+20','U+361','U+B0','U+29']
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;(ノಠ益ಠ)ノ彡&quot;~text~description=
'UTF-8 not-ASCII (8 graphemes, 8 codepoints, 20 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;(ノಠ益ಠ)ノ彡&quot;~text~graphemes~each(&quot;c2x&quot;)=
[ 28,'E3838E','E0B2A0','E79B8A','E0B2A0', 29,'E3838E','E5BDA1']
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;(ノಠ益ಠ)ノ彡&quot;~text~codepoints~each{&quot;U+&quot;item~d2x}=
['U+28','U+30CE','U+CA0','U+76CA','U+CA0','U+29','U+30CE','U+5F61']

<span style="color:blue;">U+FE0E VARIATION SELECTOR-15 (UTF-8: EF B8 8E)
</span><span style="color:blue;">https://codepoints.net/U+fe0e
</span><span style="color:blue;">This codepoint may change the appearance of the preceding character.
</span><span style="color:blue;">If that is a symbol, dingbat or emoji, U+FE0E forces it to be rendered in a
</span><span style="color:blue;">textual fashion as compared to a colorful image.
</span><span style="color:blue;">
</span><span style="color:blue;">U+FE0F VARIATION SELECTOR-16 (UTF-8: EF B8 8F)
</span><span style="color:blue;">https://codepoints.net/U+fe0f
</span><span style="color:blue;">This codepoint may change the appearance of the preceding character.
</span><span style="color:blue;">If that is a symbol, dingbat or emoji, U+FE0F forces it to be rendered as a
</span><span style="color:blue;">colorful image as compared to a monochrome text variant.
</span><span style="color:blue;">In theory ❤ and ❄ (and many other emoji) should display as text style by default
</span><span style="color:blue;">without VS16, but many applications ignore that.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; emoji_bag = .bag~of('❤', '❤️', '❄', '❄︎', '❄️', '⚪', '⚪️', '⚫', '⚫️')
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; emoji_table = emoji_bag~table~map(&quot;text&quot;)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; emoji_table~map(&quot;c2x&quot;)==
a Table (9 items)
'⚪'    : 'E29AAA'
'⚪️' : 'E29AAA EFB88F'
'⚫'    : 'E29AAB'
'⚫️' : 'E29AAB EFB88F'
'❄'    : 'E29D84'
'❄︎' : 'E29D84 EFB88E'
'❄️' : 'E29D84 EFB88F'
'❤'    : 'E29DA4'
'❤️' : 'E29DA4 EFB88F'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; emoji_table~map(&quot;c2u&quot;)==
a Table (9 items)
'⚪'    : 'U+26AA'
'⚪️' : 'U+26AA U+FE0F'
'⚫'    : 'U+26AB'
'⚫️' : 'U+26AB U+FE0F'
'❄'    : 'U+2744'
'❄︎' : 'U+2744 U+FE0E'
'❄️' : 'U+2744 U+FE0F'
'❤'    : 'U+2764'
'❤️' : 'U+2764 U+FE0F'
<span style="color:blue;">The tables above are not well aligned
</span><span style="color:blue;">because the alignement is based on the length of the indexes,
</span><span style="color:blue;">which is (for the moment) a count of bytes, not a count of graphemes...
</span>
<span style="color:blue;">https://www.reddit.com/r/cpp/comments/aqzu7i
</span><span style="color:blue;">👩‍👨‍👩‍👧‍👦‍👧‍👧‍👦
</span><span style="color:blue;">is one grapheme, made up of 15 codepoints
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; family = &quot;👩‍👨‍👩‍👧‍👦‍👧‍👧‍👦&quot;
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; family=
'👩‍👨‍👩‍👧‍👦‍👧‍👧‍👦'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; family~text~description=                              <span style="color:blue;">-- 1 grapheme, 15 codepoints, 53 bytes</span>
'UTF-8 not-ASCII (1 grapheme, 15 codepoints, 53 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; family~text~c2x=
'F09F91A9 E2808D F09F91A8 E2808D F09F91A9 E2808D F09F91A7 E2808D F09F91A6 E2808D F09F91A7 E2808D F09F91A7 E2808D F09F91A6'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; family~text~c2u=
'U+1F469 U+200D U+1F468 U+200D U+1F469 U+200D U+1F467 U+200D U+1F466 U+200D U+1F467 U+200D U+1F467 U+200D U+1F466'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; family~text~c2g=
'F09F91A9E2808DF09F91A8E2808DF09F91A9E2808DF09F91A7E2808DF09F91A6E2808DF09F91A7E2808DF09F91A7E2808DF09F91A6'

<span style="color:blue;">https://onlineunicodetools.com/generate-zalgo-unicode
</span><span style="color:blue;">Uses Unicode combining characters to create symbol noise.
</span><span style="color:blue;">&quot;hello&quot; zalgoified:
</span><span style="color:blue;">h̵᷊̟͉͔̟̲͆e̷͇̼͉̲̾l̸̨͓̭̗᷿︣︠ͦl̶̯̻̑̈ͮ͌︡̕o̵̝̬̯᷊̭̯̦᷃ͪ̆́᷈́͜͢͞
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; helloZalgo = &quot;h̵᷊̟͉͔̟̲͆e̷͇̼͉̲̾l̸̨͓̭̗᷿︣︠ͦl̶̯̻̑̈ͮ͌︡̕o̵̝̬̯᷊̭̯̦᷃ͪ̆́᷈́͜͢͞&quot;
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; helloZalgo =
'h̵᷊̟͉͔̟̲͆e̷͇̼͉̲̾l̸̨͓̭̗᷿︣︠ͦl̶̯̻̑̈ͮ͌︡̕o̵̝̬̯᷊̭̯̦᷃ͪ̆́᷈́͜͢͞'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; helloZalgo~text~description=                          <span style="color:blue;">-- 5 graphemes, 54 codepoints, 111 bytes</span>
'UTF-8 not-ASCII (5 graphemes, 54 codepoints, 111 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; helloZalgo~text~c2x=
'68 CD86 CCB5 E1B78A CC9F CD89 CD94 CC9F CCB2 65 CCBE CCB7 CD87 CCBC CD89 CCB2 6C EFB8A3 EFB8A0 CDA6 CCB8 CD93 CCAD CC97 E1B7BF CCA8 6C CC91 CC88 CDAE CD8C EFB8A1 CC95 CCB6 CCAF CCBB 6F E1B783 CDAA CC86 CC81 E1B788 CD81 CD9E CCB5 CC9D CD9C CCAC CCAF E1B78A CDA2 CCAD CCAF CCA6'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; helloZalgo~text~c2u=
'U+0068 U+0346 U+0335 U+1DCA U+031F U+0349 U+0354 U+031F U+0332 U+0065 U+033E U+0337 U+0347 U+033C U+0349 U+0332 U+006C U+FE23 U+FE20 U+0366 U+0338 U+0353 U+032D U+0317 U+1DFF U+0328 U+006C U+0311 U+0308 U+036E U+034C U+FE21 U+0315 U+0336 U+032F U+033B U+006F U+1DC3 U+036A U+0306 U+0301 U+1DC8 U+0341 U+035E U+0335 U+031D U+035C U+032C U+032F U+1DCA U+0362 U+032D U+032F U+0326'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; helloZalgo~text~c2g=
'68CD86CCB5E1B78ACC9FCD89CD94CC9FCCB2 65CCBECCB7CD87CCBCCD89CCB2 6CEFB8A3EFB8A0CDA6CCB8CD93CCADCC97E1B7BFCCA8 6CCC91CC88CDAECD8CEFB8A1CC95CCB6CCAFCCBB 6FE1B783CDAACC86CC81E1B788CD81CD9ECCB5CC9DCD9CCCACCCAFE1B78ACDA2CCADCCAFCCA6'

<span style="color:blue;">Supported encoding conversions:
</span><span style="color:blue;">Byte to UTF-8, UTF-16, UTF-32
</span><span style="color:blue;">UTF-8 to UTF-16, UTF-32
</span><span style="color:blue;">UTF-16 to UTF-8, UTF-32
</span><span style="color:blue;">UTF-32 to UTF-8, UTF-16
</span>
<span style="color:blue;">The Byte_Encoding can be specialized to add support for specific encoding conversions.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; .Encoding~supported~table==
a Table (23 items)
'BYTE'        : (The Byte_Encoding class)
'BYTES'       : (The Byte_Encoding class)
'CP1252'      : (The CP1252_Encoding class)
'CP65001'     : (The UTF8_Encoding class)
'U16'         : (The UTF16BE_Encoding class)
'U32'         : (The UTF32BE_Encoding class)
'U8'          : (The UTF8_Encoding class)
'UTF'         : (The UTF8_Encoding class)
'UTF16'       : (The UTF16BE_Encoding class)
'UTF16BE'     : (The UTF16BE_Encoding class)
'UTF16LE'     : (The UTF16LE_Encoding class)
'UTF32'       : (The UTF32BE_Encoding class)
'UTF32BE'     : (The UTF32BE_Encoding class)
'UTF32LE'     : (The UTF32LE_Encoding class)
'UTF8'        : (The UTF8_Encoding class)
'W16'         : (The WTF16BE_Encoding class)
'W8'          : (The WTF8_Encoding class)
'WINDOWS1252' : (The CP1252_Encoding class)
'WTF'         : (The WTF8_Encoding class)
'WTF16'       : (The WTF16BE_Encoding class)
'WTF16BE'     : (The WTF16BE_Encoding class)
'WTF16LE'     : (The WTF16LE_Encoding class)
'WTF8'        : (The WTF8_Encoding class)

<span style="color:blue;">Example: CP1252 to UTF-8
</span><span style="color:blue;">&quot;Un œuf de chez MaPoule™ coûte ±0.40€&quot;
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; str_cp1252 = &quot;Un &quot; || &quot;9C&quot;x || &quot;uf de chez MaPoule&quot; || &quot;99&quot;x || &quot; co&quot; || &quot;FB&quot;x || &quot;te &quot; || &quot;B1&quot;x || &quot;0.40&quot; || &quot;80&quot;x
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; txt_cp1252 = str_cp1252~text(&quot;cp1252&quot;)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; txt_cp1252~description=
'CP1252 not-ASCII (36 graphemes, 36 codepoints, 36 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; txt_cp1252~c2x=
'55 6E 20 9C 75 66 20 64 65 20 63 68 65 7A 20 4D 61 50 6F 75 6C 65 99 20 63 6F FB 74 65 20 B1 30 2E 34 30 80'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; txt_utf8 = txt_cp1252~utf8
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; txt_utf8=
T'Un œuf de chez MaPoule™ coûte ±0.40€'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; txt_utf8~description=
'UTF-8 not-ASCII (36 graphemes, 36 codepoints, 43 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; txt_utf8~c2x=
'55 6E 20 C593 75 66 20 64 65 20 63 68 65 7A 20 4D 61 50 6F 75 6C 65 E284A2 20 63 6F C3BB 74 65 20 C2B1 30 2E 34 30 E282AC'

<span style="color:blue;">Comparing the size of UTF-8 vs UTF-16 vs UTF-32 for various strings.
</span><span style="color:blue;">These strings are initially UTF-8 encoded.
</span><span style="color:blue;">The first step is to get a wrapper RexxText (default encoding is UTF-8).
</span><span style="color:blue;">The second step is to convert to UTF-16 or UTF-32.
</span><span style="color:blue;">The description includes technical informations (t:1) about the internal tables for indexation.
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; howMuchOfStorage = &quot;how much of storage?&quot;
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; howMuchOfStorage~text~description(t:1)=         <span style="color:blue;">-- UTF-8:  20 graphemes, 20 codepoints, 20 bytes</span>
'UTF-8 ASCII (20 graphemes (0 index), 20 codepoints (0 index), 20 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; howMuchOfStorage~text~utf16~description(t:1)=   <span style="color:blue;">-- UTF-16: 20 graphemes, 20 codepoints, 40 bytes</span>
'UTF-16BE ASCII (20 graphemes (0 index), 20 codepoints (0 index), 40 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; howMuchOfStorage~text~utf32~description(t:1)=
'UTF-32BE ASCII (20 graphemes (0 index), 20 codepoints (0 index), 80 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; rexCharacters = &quot;'rex' in their name: ꎅ ꎜ ꏑ 🦖&quot;
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; rexCharacters~text~description(t:1)=            <span style="color:blue;">-- UTF-8:  28 graphemes, 28 codepoints, 37 bytes</span>
'UTF-8 not-ASCII (28 graphemes (6 indexes from index 23), 28 codepoints (6 indexes from index 23), 37 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; rexCharacters~text~utf16~description(t:1)=      <span style="color:blue;">-- UTF-16: 28 graphemes, 28 codepoints, 58 bytes</span>
'UTF-16BE not-ASCII (28 graphemes (0 index), 28 codepoints (0 index), 58 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; rexCharacters~text~utf32~description(t:1)=
'UTF-32BE not-ASCII (28 graphemes (0 index), 28 codepoints (0 index), 112 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; family = &quot;👩‍👨‍👩‍👧‍👦‍👧‍👧‍👦&quot;
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; family~text~description(t:1)=                   <span style="color:blue;">-- UTF-8:  1 grapheme, 15 codepoints, 53 bytes</span>
'UTF-8 not-ASCII (1 grapheme (0 index), 15 codepoints (14 indexes from index 2), 53 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; family~text~utf16~description(t:1)=             <span style="color:blue;">-- UTF-16: 1 grapheme, 15 codepoints, 46 bytes</span>
'UTF-16BE not-ASCII (1 grapheme (0 index), 15 codepoints (14 indexes from index 2), 46 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; family~text~utf32~description(t:1)=
'UTF-32BE not-ASCII (1 grapheme (0 index), 15 codepoints (0 index), 60 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; helloZalgo = &quot;h̵᷊̟͉͔̟̲͆e̷͇̼͉̲̾l̸̨͓̭̗᷿︣︠ͦl̶̯̻̑̈ͮ͌︡̕o̵̝̬̯᷊̭̯̦᷃ͪ̆́᷈́͜͢͞&quot;
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; helloZalgo~text~description(t:1)=               <span style="color:blue;">-- UTF-8:  5 graphemes, 54 codepoints, 111 bytes</span>
'UTF-8 not-ASCII (5 graphemes (4 indexes from index 2), 54 codepoints (52 indexes from index 3), 111 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; helloZalgo~text~utf16~description(t:1)=         <span style="color:blue;">-- UTF-16: 5 graphemes, 54 codepoints, 108 bytes</span>
'UTF-16BE not-ASCII (5 graphemes (4 indexes from index 2), 54 codepoints (0 index), 108 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; helloZalgo~text~utf32~description(t:1)=
'UTF-32BE not-ASCII (5 graphemes (4 indexes from index 2), 54 codepoints (0 index), 216 bytes, 0 error)'

<span style="color:blue;">End of demonstration.
</span></pre>
</body>
</html>
