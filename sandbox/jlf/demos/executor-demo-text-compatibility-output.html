<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- This file was created with the aha Ansi HTML Adapter. https://github.com/theZiz/aha -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="application/xml+xhtml; charset=UTF-8"/>
<title>executor-demo-text-compatibility-output.html</title>
</head>
<body>
<pre>
<span style="font-weight:bold;color:green;">loadPackage OK for extension/stringChunk.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for utilities/indentedStream.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for extension/extensions.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for rxunixsys
</span><span style="font-weight:bold;color:green;">loadPackage OK for ncurses.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for csvStream.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for hostemu
</span><span style="font-weight:bold;color:green;">loadPackage OK for json.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for mime.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for rxftp.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for rxmath
</span><span style="font-weight:bold;color:green;">loadPackage OK for rxregexp.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for regex/regex.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for smtp.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for socket.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for streamsocket.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for pipeline/pipe.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for rgf_util2/rgf_util2.rex
</span><span style="font-weight:bold;color:green;">loadPackage OK for BSF.CLS
</span><span style="font-weight:bold;color:green;">loadPackage OK for oorexxshell_queries.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for pipeline/pipe_extension.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for rgf_util2/rgf_util2_wrappers.rex
</span><span style="font-weight:bold;color:green;">
</span><span style="font-weight:bold;color:green;">REXX-ooRexx_4.3.0(MT)_64-bit 6.04 4 Aug 2023
</span><span style="font-weight:bold;color:green;">Input queue name: S14cecQ600003d8e3c0
</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">call loadUnicodeCharacterNames</span>
<span style="font-weight:bold;color:green;">Load the Unicode character names 15.0.0 
</span>.............................................<span style="font-weight:bold;color:green;">
</span><span style="font-weight:bold;color:green;">Total loaded character names: 149186
</span><span style="font-weight:bold;color:green;">Total character name aliases: 473
</span><span style="font-weight:bold;color:blue;">Unicode character intervals not expanded, execute: call expandUnicodeCharacterIntervals
</span>

<span style="font-weight:bold;color:blue;">--------------------------------------------
</span><span style="font-weight:bold;color:blue;">-- Text encoding - Compatibility with String
</span><span style="font-weight:bold;color:blue;">--------------------------------------------
</span>
<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">Compatibility with the class String.
</span><span style="font-weight:bold;color:blue;">This is a work in progress, many methods not yet supported,
</span><span style="font-weight:bold;color:blue;">Unicode implementation still missing for many methods.
</span><span style="font-weight:bold;color:blue;">*/
</span>
<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">This string is used in several places:
</span><span style="font-weight:bold;color:blue;">&quot;noël👩‍👨‍👩‍👧🎅&quot;
</span><span style="font-weight:bold;color:blue;">Depending on your editor/browser, you may see 5 emojis, or 3 emojis.
</span><span style="font-weight:bold;color:blue;">With Unicode 13, the display is 3 emojis (woman + family + father christmas).
</span><span style="font-weight:bold;color:blue;">👩	U+1F469	WOMAN
</span><span style="font-weight:bold;color:blue;">‍	U+200D	ZERO WIDTH JOINER
</span><span style="font-weight:bold;color:blue;">👨	U+1F468	MAN
</span><span style="font-weight:bold;color:blue;">‍	U+200D	ZERO WIDTH JOINER
</span><span style="font-weight:bold;color:blue;">👩	U+1F469	WOMAN
</span><span style="font-weight:bold;color:blue;">‍	U+200D	ZERO WIDTH JOINER
</span><span style="font-weight:bold;color:blue;">👧	U+1F467	GIRL
</span><span style="font-weight:bold;color:blue;">🎅	U+1F385	FATHER CHRISTMAS
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">Notice that 👩‍👨‍👩‍👧 constitute only 1 grapheme thanks to the ZERO WIDTH JOINER.
</span><span style="font-weight:bold;color:blue;">*/
</span>

ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~description=</span>
'UTF-8 not-ASCII (6 characters, 12 codepoints, 34 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~c2u=</span>
'U+006E U+006F U+00EB U+006C U+1F469 U+200D U+1F468 U+200D U+1F469 U+200D U+1F467 U+1F385'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~c2x=</span>
'6E 6F C3AB 6C F09F91A9 E2808D F09F91A8 E2808D F09F91A9 E2808D F09F91A7 F09F8E85'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~c2g=</span>
'6E 6F C3AB 6C F09F91A9E2808DF09F91A8E2808DF09F91A9E2808DF09F91A7 F09F8E85'


<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">Two RexxText values are considered equal if their extended grapheme clusters
</span><span style="font-weight:bold;color:blue;">are canonically equivalent.This is used by the Swift language.
</span><span style="font-weight:bold;color:blue;">Q&amp;A: https://lists.isocpp.org/sg16/2018/08/0121.php
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">TODO: confirm that it's NFC, and only that.
</span><span style="font-weight:bold;color:blue;">The definition of canonical equivalence by the Unicode standard seems not
</span><span style="font-weight:bold;color:blue;">limited to NFC. https://unicode.org/notes/tn5/
</span><span style="font-weight:bold;color:blue;">*/
</span>
<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">The strict comparison operators use the NFC normalization.
</span><span style="font-weight:bold;color:blue;">After normalization, they delegate to the String's strict comparison operators.
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">The non-strict comparison operators use the NFC normalization plus
</span><span style="font-weight:bold;color:blue;">    stripIgnorable:.true
</span><span style="font-weight:bold;color:blue;">    lump:.true
</span><span style="font-weight:bold;color:blue;">After normalization + transformations, they delegate to the String's non-strict
</span><span style="font-weight:bold;color:blue;">comparison operators. Thanks to the lump transformation, all the Unicode spaces
</span><span style="font-weight:bold;color:blue;">are supported.
</span><span style="font-weight:bold;color:blue;">*/
</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">textNFC = &quot;Noël&quot;~text~NFC</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">textNFC~UnicodeCharacters==</span>
an Array (shape [4], 4 items)
 1 : ( &quot;N&quot;   U+004E Lu 1 &quot;LATIN CAPITAL LETTER N&quot; )
 2 : ( &quot;o&quot;   U+006F Ll 1 &quot;LATIN SMALL LETTER O&quot; )
 3 : ( &quot;ë&quot;   U+00EB Ll 1 &quot;LATIN SMALL LETTER E WITH DIAERESIS&quot; )
 4 : ( &quot;l&quot;   U+006C Ll 1 &quot;LATIN SMALL LETTER L&quot; )
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">textNFD=&quot;Noël&quot;~text~NFD</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">textNFD~UnicodeCharacters==</span>
an Array (shape [5], 5 items)
 1 : ( &quot;N&quot;   U+004E Lu 1 &quot;LATIN CAPITAL LETTER N&quot; )
 2 : ( &quot;o&quot;   U+006F Ll 1 &quot;LATIN SMALL LETTER O&quot; )
 3 : ( &quot;e&quot;   U+0065 Ll 1 &quot;LATIN SMALL LETTER E&quot; )
 4 : ( &quot;̈&quot;    U+0308 Mn 0 &quot;COMBINING DIAERESIS&quot; )
 5 : ( &quot;l&quot;   U+006C Ll 1 &quot;LATIN SMALL LETTER L&quot; )
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">(textNFC == textNFD)=                                               </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">(textNFC = textNFD)=                                                </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">(&quot; &quot;textNFC == textNFD&quot; &quot;)=                                         </span><span style="font-weight:bold;color:blue;">-- 0 because strict</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">(&quot; &quot;textNFC = textNFD&quot; &quot;)=                                          </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">(&quot; &quot;textNFC = (textNFD&quot;\u{NBSP}&quot;)~unescape)=                        </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">(&quot; &quot;textNFC = (textNFD&quot;\u{ZWSP}&quot;)~unescape)=                        </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">(&quot;-&quot;textNFC = (&quot;\u{OBLIQUE HYPHEN}&quot;textNFD&quot;\u{ZWSP}&quot;)~unescape)=    </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1


<span style="font-weight:bold;color:blue;">-- []
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text[3]=; result~description=</span>
T'ë'
'UTF-8 not-ASCII (1 character, 1 codepoint, 2 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text[3,3]=; result~description=</span>
T'ël👩‍👨‍👩‍👧'
'UTF-8 not-ASCII (3 characters, 9 codepoints, 28 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text[3,6]=; result~description=</span>
T'ël👩‍👨‍👩‍👧🎅'
'UTF-8 not-ASCII (4 characters, 10 codepoints, 32 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">-- ?
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;0&quot;~text~?(&quot;true&quot;~text, &quot;false&quot;~text)=</span>
T'false'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;1&quot;~text~?(&quot;true&quot;~text, &quot;false&quot;~text)=</span>
T'true'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;not a boolean value&quot;~text~?(&quot;true&quot;~text, &quot;false&quot;~text)=</span>
<span style="font-weight:bold;color:red;">Logical value must be exactly &quot;0&quot; or &quot;1&quot;; found &quot;not a boolean value&quot;.
</span><span style="font-weight:bold;color:red;">Error code= 34.901
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;not a boolean value 🤔&quot;~text~?(&quot;true&quot;~text, &quot;false&quot;~text)=</span>
<span style="font-weight:bold;color:red;">UTF-8 not-ASCII 'not a b...' is not compatible with a Rexx logical value.
</span><span style="font-weight:bold;color:red;">Error code= 23.900
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;0&quot;~text~?(&quot;true 🤔&quot;~text, &quot;false 🤔&quot;~text)=</span>
T'false 🤔'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;1&quot;~text~?(&quot;true 🤔&quot;~text, &quot;false 🤔&quot;~text)=</span>
T'true 🤔'


<span style="font-weight:bold;color:blue;">-- append
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;hello&quot;~text~append(&quot; &quot;)~append(&quot;john&quot;~text)=</span>
T'hello john'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;\uD83D&quot;~text(&quot;wtf8&quot;)~append(&quot;\uDE3F&quot;)~unescape=    </span><span style="font-weight:bold;color:blue;">-- High surrogate followed by low surrogate is valid WTF-8</span>
T'😿'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;\uD83D&quot;~text(&quot;utf8&quot;)~append(&quot;\uDE3F&quot;)~unescape=    </span><span style="font-weight:bold;color:blue;">-- High surrogate followed by low surrogate is INVALID UTF-8</span>
T'������'


<span style="font-weight:bold;color:blue;">-- c2d
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;e&quot;~text~c2d=</span>
 101
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;é&quot;~text~c2d=</span>
 50089


<span style="font-weight:bold;color:blue;">-- c2x
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~c2x=</span>
'6E 6F C3AB 6C F09F91A9 E2808D F09F91A8 E2808D F09F91A9 E2808D F09F91A7 F09F8E85'


<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">A caseless method is transforming its arguments using CaseFold.
</span><span style="font-weight:bold;color:blue;">The default normalization is NFC, it's possible to change it with the argument
</span><span style="font-weight:bold;color:blue;">normalization
</span><span style="font-weight:bold;color:blue;">    .unicode~NFC    (default)
</span><span style="font-weight:bold;color:blue;">    .unicode~NFD
</span><span style="font-weight:bold;color:blue;">    .unicode~NFKC
</span><span style="font-weight:bold;color:blue;">    .unicode~NFKD
</span><span style="font-weight:bold;color:blue;">There is no value NFKC_CF because it can be done using the caseless methods by
</span><span style="font-weight:bold;color:blue;">passing NFKC + stripIgnorable.
</span><span style="font-weight:bold;color:blue;">*/
</span>

<span style="font-weight:bold;color:blue;">-- caselessCompareTo
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;pere noel&quot;~text~caselessCompareTo(&quot;Père Noël&quot;)=                    </span><span style="font-weight:bold;color:blue;">-- -1 (lesser)</span>
-1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;pere noel&quot;~text~caselessCompareTo(&quot;Père Noël&quot;, stripMark:.true)=   </span><span style="font-weight:bold;color:blue;">--  0 (equal because the accents are ignored)</span>
 0


<span style="font-weight:bold;color:blue;">-- caselessEquals
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;ŒUF&quot;~text~caselessEquals(&quot;œuf&quot;)=           </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;œuf&quot;~text~caselessEquals(&quot;ŒUF&quot;)=           </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Straße&quot;~text~caselessEquals(&quot;strasse&quot;)=    </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;strasse&quot;~text~caselessEquals(&quot;Straße&quot;)=    </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1


<span style="font-weight:bold;color:blue;">-- caselessMatch
</span><span style="font-weight:bold;color:blue;">-- &quot;Bundesschnellstraße&quot;                                    -- at 14: &quot;s&quot;, at 18:&quot;ß&quot;
</span><span style="font-weight:bold;color:blue;">--  1234567890123456789
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Bundesstraße im Freiland&quot;~text~caselessMatch(14, &quot;im&quot;)=    </span><span style="font-weight:bold;color:blue;">-- .true</span>
 1


<span style="font-weight:bold;color:blue;">-- caselessMatchChar
</span><span style="font-weight:bold;color:blue;">-- &quot;Bundesschnellstraße&quot;                                    -- at 14: &quot;s&quot;, at 18:&quot;ß&quot;
</span><span style="font-weight:bold;color:blue;">--  1234567890123456789
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Bundesschnellstraße&quot;~text~caselessMatchChar(18, &quot;s&quot;)=      </span><span style="font-weight:bold;color:blue;">-- 1    &quot;ß&quot; becomes &quot;ss&quot; which is 2 characters. The first character at 18 matches &quot;s&quot;</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Bundesschnellstraße&quot;~text~caselessMatchChar(19, &quot;s&quot;)=      </span><span style="font-weight:bold;color:blue;">-- 0    &quot;ß&quot; becomes &quot;ss&quot; which is 2 characters. The character at 19 is &quot;e&quot;, not the second &quot;s&quot;</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Bundesschnellstraße&quot;~text~caselessMatchChar(19, &quot;e&quot;)=      </span><span style="font-weight:bold;color:blue;">-- 1    &quot;ß&quot; becomes &quot;ss&quot; which is 2 characters. The character at 19 is &quot;e&quot;, not the second &quot;s&quot;</span>
 1

<span style="font-weight:bold;color:blue;">-- caselessMatchChar (cont.)
</span><span style="font-weight:bold;color:blue;">-- The ligature disappears when casefolded
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;baﬄe&quot;~text~casefold=                                        </span><span style="font-weight:bold;color:blue;">-- T'baffle'</span>
T'baffle'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;BAFFLE&quot;~text~caselessMatchChar(3, &quot;ﬄ&quot;)=                     </span><span style="font-weight:bold;color:blue;">-- 1      &quot;ﬄ&quot; becomes &quot;ffl&quot; (3 characters), there is a match on &quot;f&quot; at 3</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;BAFFLE&quot;~text~caselessMatchChar(5, &quot;ﬄ&quot;)=                     </span><span style="font-weight:bold;color:blue;">-- 1      &quot;ﬄ&quot; becomes &quot;ffl&quot; (3 characters), there is a match on &quot;l&quot; at 5</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;BAFFLE&quot;~text~caselessMatchChar(5, &quot;L&quot;)=                      </span><span style="font-weight:bold;color:blue;">-- 1      there is a match on &quot;l&quot; at 5</span>
 1

<span style="font-weight:bold;color:blue;">-- caselessMatchChar (cont.)
</span><span style="font-weight:bold;color:blue;">-- Some ligatures are not decomposed by NFKC.
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;ŒUF&quot;~text~caselessEquals(&quot;oeuf&quot;)=                                  </span><span style="font-weight:bold;color:blue;">-- 0</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;ŒUF&quot;~text~caselessEquals(&quot;oeuf&quot;, normalization:.Unicode~NFKC)=     </span><span style="font-weight:bold;color:blue;">-- 0</span>
 0


<span style="font-weight:bold;color:blue;">-- center
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noelFC&quot;~text~center(10)=; result~description=              </span><span style="font-weight:bold;color:blue;">-- forward to String</span>
T'  noelFC  '
'UTF-8 ASCII (10 characters, 10 codepoints, 10 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(10)=; result~description=</span>
T'  noël👩‍👨‍👩‍👧🎅  '
'UTF-8 not-ASCII (10 characters, 16 codepoints, 38 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(9)=; result~description=</span>
T' noël👩‍👨‍👩‍👧🎅  '
'UTF-8 not-ASCII (9 characters, 15 codepoints, 37 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(8)=; result~description=</span>
T' noël👩‍👨‍👩‍👧🎅 '
'UTF-8 not-ASCII (8 characters, 14 codepoints, 36 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(7)=; result~description=</span>
T'noël👩‍👨‍👩‍👧🎅 '
'UTF-8 not-ASCII (7 characters, 13 codepoints, 35 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(6)=; result~description=</span>
T'noël👩‍👨‍👩‍👧🎅'
'UTF-8 not-ASCII (6 characters, 12 codepoints, 34 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(5)=; result~description=</span>
T'noël👩‍👨‍👩‍👧'
'UTF-8 not-ASCII (5 characters, 11 codepoints, 30 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(4)=; result~description=</span>
T'oël👩‍👨‍👩‍👧'
'UTF-8 not-ASCII (4 characters, 10 codepoints, 29 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(3)=; result~description=</span>
T'oël'
'UTF-8 not-ASCII (3 characters, 3 codepoints, 4 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(2)=; result~description=</span>
T'ël'
'UTF-8 not-ASCII (2 characters, 2 codepoints, 3 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(1)=; result~description=</span>
T'ë'
'UTF-8 not-ASCII (1 character, 1 codepoint, 2 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(0)=; result~description=</span>
T''
'UTF-8 ASCII (0 character, 0 codepoint, 0 byte, 0 error)'

<span style="font-weight:bold;color:blue;">-- center with pad
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;=&quot;~description=                                            </span><span style="font-weight:bold;color:blue;">-- 'UTF-8 ASCII (1 byte)'</span>
'UTF-8 ASCII by default (1 byte)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;=&quot;~c2x=                                                    </span><span style="font-weight:bold;color:blue;">-- '3D'</span>
'3D'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noelFC&quot;~text~center(10, &quot;=&quot;)=; result~description=         </span><span style="font-weight:bold;color:blue;">-- forward to String</span>
T'==noelFC=='
'UTF-8 ASCII (10 characters, 10 codepoints, 10 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;═&quot;~description=                                            </span><span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (3 bytes)'</span>
'UTF-8 not-ASCII by default (3 bytes)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;═&quot;~text~description=                                       </span><span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (1 character, 1 codepoint, 3 bytes, 0 error)'</span>
'UTF-8 not-ASCII (1 character, 1 codepoint, 3 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;═&quot;~c2x=                                                    </span><span style="font-weight:bold;color:blue;">-- 'E29590'</span>
'E29590'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noelFC&quot;~text~center(10, &quot;═&quot;)=; result~description=         </span><span style="font-weight:bold;color:blue;">-- don't forward to String because the pad is more than 1 byte</span>
T'══noelFC══'
'UTF-8 not-ASCII (10 characters, 10 codepoints, 18 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(10, &quot;═&quot;)=; result~description=</span>
T'══noël👩‍👨‍👩‍👧🎅══'
'UTF-8 not-ASCII (10 characters, 16 codepoints, 46 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(9, &quot;═&quot;)=; result~description=</span>
T'═noël👩‍👨‍👩‍👧🎅══'
'UTF-8 not-ASCII (9 characters, 15 codepoints, 43 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(8, &quot;═&quot;)=; result~description=</span>
T'═noël👩‍👨‍👩‍👧🎅═'
'UTF-8 not-ASCII (8 characters, 14 codepoints, 40 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(7, &quot;═&quot;)=; result~description=</span>
T'noël👩‍👨‍👩‍👧🎅═'
'UTF-8 not-ASCII (7 characters, 13 codepoints, 37 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(6, &quot;═&quot;)=; result~description=</span>
T'noël👩‍👨‍👩‍👧🎅'
'UTF-8 not-ASCII (6 characters, 12 codepoints, 34 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">-- contains
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~contains(&quot;oe&quot;)=                 </span><span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~contains(&quot;oe&quot;~text)=            </span><span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~contains(&quot;oë&quot;)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~contains(&quot;oë&quot;~text)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~contains(&quot;oe&quot;)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~contains(&quot;oe&quot;~text)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~contains(&quot;oë&quot;)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~contains(&quot;oë&quot;~text)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>

<span style="font-weight:bold;color:blue;">-- copies
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~copies(4)=; result~description=</span>
T'noël👩‍👨‍👩‍👧🎅noël👩‍👨‍👩‍👧🎅noël👩‍👨‍👩‍👧🎅noël👩‍👨‍👩‍👧🎅'
'UTF-8 not-ASCII (24 characters, 48 codepoints, 136 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">-- hashCode
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~hashCode~class=</span>
(The String class)
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~hashCode~c2x=</span>
'8FA5DCDA35AE1A58'


<span style="font-weight:bold;color:blue;">-- length
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~length=</span>
 6


<span style="font-weight:bold;color:blue;">-- match
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~match(2, &quot;oe&quot;)=                 </span><span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~match(2, &quot;oe&quot;~text)=            </span><span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~match(2, &quot;oë&quot;)=</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~match(2, &quot;oë&quot;~text)=</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(2, &quot;oe&quot;)=</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(2, &quot;oe&quot;~text)=</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(2, &quot;oë&quot;)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(2, &quot;oë&quot;~text)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(2, &quot;oël&quot;)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(2, &quot;oël&quot;~text)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(3, &quot;ë&quot;)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(3, &quot;ë&quot;~text)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(3, &quot;ël&quot;)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(3, &quot;ël&quot;~text)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(4, &quot;l&quot;)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~match(4, &quot;l&quot;~text)=</span>
 1


<span style="font-weight:bold;color:blue;">-- matchChar
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~matchChar(3, &quot;Ee&quot;)=             </span><span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~matchChar(3, &quot;Ee&quot;~text)=        </span><span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~matchChar(3, &quot;EËeë&quot;)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~matchChar(3, &quot;EËeë&quot;~text)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~matchChar(3, &quot;EËeë&quot;)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~matchChar(3, &quot;EËeë&quot;~text)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~matchChar(3, &quot;EËeë&quot;)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~matchChar(3, &quot;Ee&quot;, stripMark:)= </span><span style="font-weight:bold;color:blue;">-- remove the accents from the tested string</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~matchChar(4, &quot;Ll&quot;~text)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~matchChar(4, &quot;Ll&quot;~text)=</span>
 1

<span style="font-weight:bold;color:blue;">-- matchChar (cont.)
</span><span style="font-weight:bold;color:blue;">-- &quot;Bundesschnellstraße&quot;                                    -- at 14: &quot;s&quot;, at 18:&quot;ß&quot;
</span><span style="font-weight:bold;color:blue;">--  1234567890123456789
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Bundesschnellstraße&quot;~text~matchChar(14, &quot;s&quot;)=              </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Bundesschnellstraße&quot;~text~matchChar(18, &quot;s&quot;)=              </span><span style="font-weight:bold;color:blue;">-- 0</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Bundesschnellstraße&quot;~text~matchChar(18, &quot;ß&quot;)=              </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1

<span style="font-weight:bold;color:blue;">-- matchChar (cont.)
</span><span style="font-weight:bold;color:blue;">-- The ligature disappears in NFK[CD] but not in NF[CD]
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;baﬄe&quot;~text~matchChar(3, &quot;f&quot;)=                               </span><span style="font-weight:bold;color:blue;">-- 0     &quot;ﬄ&quot; is ONE character because NFC</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;baﬄe&quot;~text~matchChar(3, &quot;ﬄ&quot;)=                              </span><span style="font-weight:bold;color:blue;">-- 1     &quot;ﬄ&quot; is ONE character because NFC</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;baﬄe&quot;~text~matchChar(3, &quot;ﬄ&quot;, normalization:.Unicode~NFKD)= </span><span style="font-weight:bold;color:blue;">-- 1     &quot;ﬄ&quot; becomes &quot;ffl&quot; (3 characters). There is a match because the first character is &quot;f&quot;</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;baﬄe&quot;~text~matchChar(3, &quot;f&quot;, normalization:.Unicode~NFKD)=  </span><span style="font-weight:bold;color:blue;">-- 1     &quot;ﬄ&quot; becomes &quot;ffl&quot; (3 characters). There is a match because the first character is &quot;f&quot;</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;baﬄe&quot;~text~matchChar(4, &quot;f&quot;, normalization:.Unicode~NFKD)=  </span><span style="font-weight:bold;color:blue;">-- 0     &quot;ﬄ&quot; becomes &quot;ffl&quot; (3 characters). The character at 4 is &quot;e&quot;, not the second &quot;f&quot;</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;baﬄe&quot;~text~matchChar(4, &quot;e&quot;, normalization:.Unicode~NFKD)=  </span><span style="font-weight:bold;color:blue;">-- 1     &quot;ﬄ&quot; becomes &quot;ffl&quot; (3 characters). The character at 4 is &quot;e&quot;, not the second &quot;f&quot;</span>
 1


<span style="font-weight:bold;color:blue;">-- pos
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~pos(&quot;oe&quot;)=                      </span><span style="font-weight:bold;color:blue;">-- forward to String</span>
 2
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~pos(&quot;oe&quot;~text)=                 </span><span style="font-weight:bold;color:blue;">-- forward to String</span>
 2
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~pos(&quot;oë&quot;)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~pos(&quot;oë&quot;~text)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~pos(&quot;oe&quot;)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~pos(&quot;oe&quot;~text)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~pos(&quot;oë&quot;)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~pos(&quot;oë&quot;~text)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~pos(&quot;l&quot;)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël&quot;~text~pos(&quot;l&quot;~text)=</span>
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>

<span style="font-weight:bold;color:blue;">-- subchar
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~subchar(3)=; result~description=</span>
T'ë'
'UTF-8 not-ASCII (1 character, 1 codepoint, 2 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~subchar(4)=; result~description=</span>
T'l'
'UTF-8 ASCII (1 character, 1 codepoint, 1 byte, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~subchar(5)=; result~description=</span>
T'👩‍👨‍👩‍👧'
'UTF-8 not-ASCII (1 character, 7 codepoints, 25 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">-- substr
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~substr(3, 3, &quot;x&quot;)=; result~description=   </span><span style="font-weight:bold;color:blue;">-- forward to String</span>
T'elx'
'UTF-8 ASCII (3 characters, 3 codepoints, 3 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~substr(3, 3, &quot;▷&quot;)=; result~description=        </span><span style="font-weight:bold;color:blue;">-- self is a String: error because the pad character is 3 bytes</span>
<span style="font-weight:bold;color:red;">Incorrect pad or character argument specified; found &quot;▷&quot;
</span><span style="font-weight:bold;color:red;">Error code= 93.922
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~substr(3, 3, &quot;▷&quot;~text)=; result~description=   </span><span style="font-weight:bold;color:blue;">-- self is a String: error because the pad character is not compatible with String</span>
<span style="font-weight:bold;color:red;">UTF-8 not-ASCII '▷' cannot be converted to a String instance.
</span><span style="font-weight:bold;color:red;">Error code= 23.900
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noel&quot;~text~substr(3, 3, &quot;▷&quot;)=; result~description=   </span><span style="font-weight:bold;color:blue;">-- no error because self is a RexxText and the pad character is one character when converted to the default encoding</span>
T'el▷'
'UTF-8 not-ASCII (3 characters, 3 codepoints, 5 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~substr(3, 3, &quot;▷&quot;)=; result~description=</span>
T'ël👩‍👨‍👩‍👧'
'UTF-8 not-ASCII (3 characters, 9 codepoints, 28 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;noël👩‍👨‍👩‍👧🎅&quot;~text~substr(3, 6, &quot;▷&quot;)=; result~description=</span>
T'ël👩‍👨‍👩‍👧🎅▷▷'
'UTF-8 not-ASCII (6 characters, 12 codepoints, 38 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">-- x2c
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;F09F9180&quot;~text~x2c=</span>
T'👀'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;not an hexadecimal value&quot;~text~x2c</span>
<span style="font-weight:bold;color:red;">Only 0-9, a-f, A-F, and whitespace characters are valid in a hexadecimal string; character found &quot;n&quot;.
</span><span style="font-weight:bold;color:red;">Error code= 93.933
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;not an hexadecimal value 🤔&quot;~text~x2c</span>
<span style="font-weight:bold;color:red;">UTF-8 not-ASCII 'not an ...' is not compatible with a Rexx hexadecimal value.
</span><span style="font-weight:bold;color:red;">Error code= 23.900
</span>

<span style="font-weight:bold;color:blue;">---------------------------------------------------------
</span><span style="font-weight:bold;color:blue;">-- Text encoding - Functional
</span><span style="font-weight:bold;color:blue;">---------------------------------------------------------
</span>
<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">The only needed methods on RexxText are
</span><span style="font-weight:bold;color:blue;">    ~characters
</span><span style="font-weight:bold;color:blue;">    ~subwords   (still to implement)
</span><span style="font-weight:bold;color:blue;">    ~chunks     (still to implement)
</span><span style="font-weight:bold;color:blue;">*/
</span>
<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">Example inspired by https://elixir-lang.org/
</span><span style="font-weight:bold;color:blue;">Frequency of each character, ignoring the accents:
</span><span style="font-weight:bold;color:blue;">&quot;Elixir&quot; |&gt; String.graphemes() |&gt; Enum.frequencies()
</span><span style="font-weight:bold;color:blue;">%{&quot;E&quot; =&gt; 1, &quot;i&quot; =&gt; 2, &quot;l&quot; =&gt; 1, &quot;r&quot; =&gt; 1, &quot;x&quot; =&gt; 1}
</span><span style="font-weight:bold;color:blue;">*/
</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Notre père Noël 🎅&quot;~text~transform(stripMark:)~reduce(by: &quot;characters&quot;, initial: .stem~new~~put(0)){accu[item~string] += 1}=</span>
a Stem (9 items)
'🎅' :  1
' '    :  3
'e'    :  4
'l'    :  1
'N'    :  2
'o'    :  2
'p'    :  1
'r'    :  2
't'    :  1


<span style="font-weight:bold;color:blue;">---------------------------------------------------------
</span><span style="font-weight:bold;color:blue;">-- Text encoding - Generator
</span><span style="font-weight:bold;color:blue;">---------------------------------------------------------
</span>
<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">The only needed methods on RexxText are
</span><span style="font-weight:bold;color:blue;">    ~characters
</span><span style="font-weight:bold;color:blue;">    ~subwords   (still to implement)
</span><span style="font-weight:bold;color:blue;">*/
</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">g=&quot;Noël 🎅&quot;~text~generateC</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">g~()=       </span><span style="font-weight:bold;color:blue;">-- T'N'</span>
T'N'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">g~()=       </span><span style="font-weight:bold;color:blue;">-- T'o'</span>
T'o'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">g~()=       </span><span style="font-weight:bold;color:blue;">-- T'ë'</span>
T'ë'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">g~()=       </span><span style="font-weight:bold;color:blue;">-- T'l'</span>
T'l'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">g~()=       </span><span style="font-weight:bold;color:blue;">-- T' '</span>
T' '
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">g~()=       </span><span style="font-weight:bold;color:blue;">-- T'🎅'</span>
T'🎅'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">g~()=       </span><span style="font-weight:bold;color:blue;">-- [no result]</span>
[no result]


<span style="font-weight:bold;color:blue;">---------------------------------------------------------
</span><span style="font-weight:bold;color:blue;">-- Text encoding - Compatibility with regular expressions
</span><span style="font-weight:bold;color:blue;">---------------------------------------------------------
</span>
<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">A way to test the compatibility of RexxText with String is to pass instances of
</span><span style="font-weight:bold;color:blue;">RexxText to the regular expression engine regex.cls, and see what happens...
</span><span style="font-weight:bold;color:blue;">*/
</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">p = .Pattern~compile(&quot;a.c&quot;~text)</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">p~matches(&quot;abc&quot;~text)=</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">p~matches(&quot;aôc&quot;~text)=</span>
 1

ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">p = .Pattern~compile(&quot;à.c&quot;~text)</span>
<span style="font-weight:bold;color:red;">UTF-8 not-ASCII 'à' cannot be converted to a String instance.
</span><span style="font-weight:bold;color:red;">Error code= 23.900
</span>

<span style="font-weight:bold;color:blue;">-----------------------------------------
</span><span style="font-weight:bold;color:blue;">-- Text encoding - Compatibility with BIF
</span><span style="font-weight:bold;color:blue;">-----------------------------------------
</span>
<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">[Intermediate solution]
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">Several solutions in RosettaCode are in error because the pad character used
</span><span style="font-weight:bold;color:blue;">with the function 'center' is a UTF-8 string made of several bytes.
</span><span style="font-weight:bold;color:blue;">The function center now supports utf-8 pad made of 1 multi-bytes character.
</span><span style="font-weight:bold;color:blue;">When the pad is not a 1 byte character then the interpreter converts the string
</span><span style="font-weight:bold;color:blue;">to a RexxText and sends it the message &quot;center&quot;.
</span><span style="font-weight:bold;color:blue;">The returned value is the String associated to the RexxText.
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">The invariants of the method 'center' are true for the RexxText, but not true for
</span><span style="font-weight:bold;color:blue;">the String (which is normal).
</span><span style="font-weight:bold;color:blue;">*/
</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;═&quot;~description=                                </span><span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (3 bytes)'</span>
'UTF-8 not-ASCII by default (3 bytes)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;═&quot;~text~description=                           </span><span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (1 character, 1 codepoint, 3 bytes, 0 error)'</span>
'UTF-8 not-ASCII (1 character, 1 codepoint, 3 bytes, 0 error)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;═&quot;~c2x=                                        </span><span style="font-weight:bold;color:blue;">-- 'E29590'</span>
'E29590'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">center(&quot;hello&quot;, 20, &quot;═&quot;)=                       </span><span style="font-weight:bold;color:blue;">-- '═══════hello════════'</span>
'═══════hello════════'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">center(&quot;hello&quot;, 20, &quot;═&quot;)~text~description=      </span><span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (20 characters, 20 codepoints, 50 bytes, 0 error)'</span>
'UTF-8 not-ASCII (20 characters, 20 codepoints, 50 bytes, 0 error)'

<span style="font-weight:bold;color:blue;">-- Idem for the function 'left'
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">left(&quot;hello&quot;, 20, &quot;═&quot;)=                         </span><span style="font-weight:bold;color:blue;">-- 'hello═══════════════'</span>
'hello═══════════════'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">left(&quot;hello&quot;, 20, &quot;═&quot;)~text~description=        </span><span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (20 characters, 20 codepoints, 50 bytes, 0 error)'</span>
'UTF-8 not-ASCII (20 characters, 20 codepoints, 50 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">[General solution]
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">The new path I would like to explore is the support of graphemes by ALL the BIF...
</span><span style="font-weight:bold;color:blue;">I have already a tiny support for center() and left(), only triggered in case of
</span><span style="font-weight:bold;color:blue;">pad character made of several bytes.
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">The generalization would be to route the BIF either towards String or towards RexxText,
</span><span style="font-weight:bold;color:blue;">in function of the compatibility of the arguments with String:
</span><span style="font-weight:bold;color:blue;">BIF(str1, str2, ..., strN)
</span><span style="font-weight:bold;color:blue;">    --&gt; forward to String (byte-oriented) if str's encoding is Byte or UTF-8 (with ASCII characters only)
</span><span style="font-weight:bold;color:blue;">    --&gt; forward to RexxText otherwise
</span><span style="font-weight:bold;color:blue;">*/
</span>
<span style="font-weight:bold;color:blue;">-- UTF-8 encoding
</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Noel&quot;~isCompatibleWithByteString=              </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">length(&quot;Noel&quot;)=                                 </span><span style="font-weight:bold;color:blue;">-- 4 because &quot;Noel&quot;~length = 4</span>
 4
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Noël&quot;~isCompatibleWithByteString=              </span><span style="font-weight:bold;color:blue;">-- 0</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">length(&quot;Noël&quot;)=                                 </span><span style="font-weight:bold;color:blue;">-- TODO: 4 because &quot;Noël&quot;~text~length = 4</span>
 5
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">&quot;Noël&quot;~length=                                  </span><span style="font-weight:bold;color:blue;">-- 5 because String remains byte-oriented, not impacted by the default encoding</span>
 5

<span style="font-weight:bold;color:blue;">-- UTF-16BE encoding
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s = &quot;0041004200430044&quot;x</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s=                                              </span><span style="font-weight:bold;color:blue;">-- '[00]A[00]B[00]C[00]D'</span>
'[00]A[00]B[00]C[00]D'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~isCompatibleWithByteString=                   </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~description=                                  </span><span style="font-weight:bold;color:blue;">-- 'UTF-8 ASCII (8 bytes)'</span>
'UTF-8 ASCII by default (8 bytes)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">length(s)=                                      </span><span style="font-weight:bold;color:blue;">-- 8 because encoding UTF-8 ASCII is compatible with String</span>
 8
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~encoding = &quot;UTF16&quot;</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~isCompatibleWithByteString=                   </span><span style="font-weight:bold;color:blue;">-- 0</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~description=                                  </span><span style="font-weight:bold;color:blue;">-- 'UTF-16BE (8 bytes)'</span>
'UTF-16BE (8 bytes)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~length=                                       </span><span style="font-weight:bold;color:blue;">-- 8 because String is always byte-oriented (ignores the encoding)</span>
 8
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">length(s)=                                      </span><span style="font-weight:bold;color:blue;">-- TODO: 4 because forwards to Text (encoding UTF-16BE is not compatible with String)</span>
 8
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~text~utf8=                                    </span><span style="font-weight:bold;color:blue;">-- ABCD</span>
T'ABCD'

<span style="font-weight:bold;color:blue;">-- UTF-32 encoding
</span>ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s = &quot;0000004100000042&quot;x</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s=                                              </span><span style="font-weight:bold;color:blue;">-- '[000000]A[000000]B'</span>
'[000000]A[000000]B'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~isCompatibleWithByteString=                   </span><span style="font-weight:bold;color:blue;">-- 1</span>
 1
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~description=                                  </span><span style="font-weight:bold;color:blue;">-- 'UTF-8 ASCII (8 bytes)'</span>
'UTF-8 ASCII by default (8 bytes)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">length(s)=                                      </span><span style="font-weight:bold;color:blue;">-- 8 because encoding UTF-8 ASCII is compatible with String</span>
 8
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~encoding = &quot;UTF32&quot;</span>
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~isCompatibleWithByteString=                   </span><span style="font-weight:bold;color:blue;">-- 0</span>
 0
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~description=                                  </span><span style="font-weight:bold;color:blue;">-- 'UTF-32BE (8 bytes)'</span>
'UTF-32BE (8 bytes)'
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~length=                                       </span><span style="font-weight:bold;color:blue;">-- 8 because String is always byte-oriented (ignores the encoding)</span>
 8
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">length(s)=                                      </span><span style="font-weight:bold;color:blue;">-- TODO: 2 because forwards to Text (encoding UTF-32 is not compatible with String)</span>
 8
ooRexx[sh]&gt; <span style="font-weight:bold;color:purple;">s~text~utf8=                                    </span><span style="font-weight:bold;color:blue;">-- AB</span>
T'AB'


<span style="font-weight:bold;color:blue;">/*
</span><span style="font-weight:bold;color:blue;">End of demonstration.
</span><span style="font-weight:bold;color:blue;">*/
</span></pre>
</body>
</html>
