<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- This file was created with the aha Ansi HTML Adapter. https://github.com/theZiz/aha -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="application/xml+xhtml; charset=UTF-8"/>
<title>executor-demo-text-compatibility-output.html</title>
</head>
<body>
<pre>
<span style="font-weight:bold;color:green;">loadPackage OK for extension/stringChunk.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for extension/extensions.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for rxunixsys
</span><span style="font-weight:bold;color:green;">loadPackage OK for ncurses.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for csvStream.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for hostemu
</span><span style="font-weight:bold;color:green;">loadPackage OK for json.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for mime.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for rxftp.cls
</span><span style="font-weight:bold;color:green;">loadLibrary OK for rxmath
</span><span style="font-weight:bold;color:green;">loadPackage OK for rxregexp.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for regex/regex.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for smtp.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for socket.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for streamsocket.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for pipeline/pipe.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for rgf_util2/rgf_util2.rex
</span><span style="font-weight:bold;color:green;">loadPackage OK for BSF.CLS
</span><span style="font-weight:bold;color:green;">loadPackage OK for oorexxshell_queries.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for pipeline/pipe_extension.cls
</span><span style="font-weight:bold;color:green;">loadPackage OK for rgf_util2/rgf_util2_wrappers.rex
</span><span style="font-weight:bold;color:green;">
</span><span style="font-weight:bold;color:green;">REXX-ooRexx_4.3.0(MT)_64-bit 6.04 5 Nov 2022
</span><span style="font-weight:bold;color:green;">Input queue name: Sa0b7Q7fada1d34490
</span>
<span style="font-weight:bold;color:blue;">--------------------------------------------
</span><span style="font-weight:bold;color:blue;">-- Text encoding - Compatibility with String
</span><span style="font-weight:bold;color:blue;">--------------------------------------------
</span>
<span style="font-weight:bold;color:blue;">Compatibility with the class String.
</span><span style="font-weight:bold;color:blue;">This is a work in progress, many methods not yet supported,
</span><span style="font-weight:bold;color:blue;">Unicode implementation still missing for many methods.
</span>
<span style="font-weight:bold;color:blue;">This string is used in several places:
</span><span style="font-weight:bold;color:blue;">&quot;noël👩‍👨‍👩‍👧🎅&quot;
</span><span style="font-weight:bold;color:blue;">Depending on your editor/browser, you may see 5 emojis, or 3 emojis.
</span><span style="font-weight:bold;color:blue;">With Unicode 13, the display is 3 emojis (woman + family + father christmas).
</span><span style="font-weight:bold;color:blue;">👩	U+1F469	WOMAN
</span><span style="font-weight:bold;color:blue;">‍	U+200D	ZERO WIDTH JOINER
</span><span style="font-weight:bold;color:blue;">👨	U+1F468	MAN
</span><span style="font-weight:bold;color:blue;">‍	U+200D	ZERO WIDTH JOINER
</span><span style="font-weight:bold;color:blue;">👩	U+1F469	WOMAN
</span><span style="font-weight:bold;color:blue;">‍	U+200D	ZERO WIDTH JOINER
</span><span style="font-weight:bold;color:blue;">👧	U+1F467	GIRL
</span><span style="font-weight:bold;color:blue;">🎅	U+1F385	FATHER CHRISTMAS
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">Notice that 👩‍👨‍👩‍👧 constitute only 1 grapheme thanks to the ZERO WIDTH JOINER.
</span>

<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~description=
'UTF-8 not-ASCII (6 graphemes, 12 codepoints, 34 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~c2u=
'U+006E U+006F U+00EB U+006C U+1F469 U+200D U+1F468 U+200D U+1F469 U+200D U+1F467 U+1F385'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~c2x=
'6E 6F C3AB 6C F09F91A9 E2808D F09F91A8 E2808D F09F91A9 E2808D F09F91A7 F09F8E85'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~c2g=
'6E 6F C3AB 6C F09F91A9E2808DF09F91A8E2808DF09F91A9E2808DF09F91A7 F09F8E85'


<span style="font-weight:bold;color:blue;">-- []
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text[3]=; result~description=
T'ë'
'UTF-8 not-ASCII (1 grapheme, 1 codepoint, 2 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text[3,3]=; result~description=
T'ël👩‍👨‍👩‍👧'
'UTF-8 not-ASCII (3 graphemes, 9 codepoints, 28 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text[3,6]=; result~description=
T'ël👩‍👨‍👩‍👧🎅'
'UTF-8 not-ASCII (4 graphemes, 10 codepoints, 32 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">-- ?
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;0&quot;~text~?(&quot;true&quot;~text, &quot;false&quot;~text)=
T'false'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;1&quot;~text~?(&quot;true&quot;~text, &quot;false&quot;~text)=
T'true'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;not a boolean value&quot;~text~?(&quot;true&quot;~text, &quot;false&quot;~text)=
<span style="font-weight:bold;color:red;">Logical value must be exactly &quot;0&quot; or &quot;1&quot;; found &quot;not a boolean value&quot;.
</span><span style="font-weight:bold;color:red;">Error code= 34.901
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;not a boolean value 🤔&quot;~text~?(&quot;true&quot;~text, &quot;false&quot;~text)=
<span style="font-weight:bold;color:red;">UTF-8 not-ASCII 'not a b...' is not compatible with a Rexx logical value.
</span><span style="font-weight:bold;color:red;">Error code= 23.900
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;0&quot;~text~?(&quot;true 🤔&quot;~text, &quot;false 🤔&quot;~text)=
T'false 🤔'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;1&quot;~text~?(&quot;true 🤔&quot;~text, &quot;false 🤔&quot;~text)=
T'true 🤔'


<span style="font-weight:bold;color:blue;">-- append
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;hello&quot;~text~append(&quot; &quot;)~append(&quot;john&quot;~text)=
T'hello john'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;\uD83D&quot;~text(&quot;wtf8&quot;)~append(&quot;\uDE3F&quot;)~unescape=    <span style="font-weight:bold;color:blue;">-- High surrogate followed by low surrogate is valid WTF-8</span>
T'😿'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;\uD83D&quot;~text(&quot;utf8&quot;)~append(&quot;\uDE3F&quot;)~unescape=    <span style="font-weight:bold;color:blue;">-- High surrogate followed by low surrogate NOT is INVALID UTF-8</span>
T'������'


<span style="font-weight:bold;color:blue;">-- c2d
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;e&quot;~text~c2d=
 101
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;é&quot;~text~c2d=
 50089


<span style="font-weight:bold;color:blue;">-- c2x
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~c2x=
'6E 6F C3AB 6C F09F91A9 E2808D F09F91A8 E2808D F09F91A9 E2808D F09F91A7 F09F8E85'


<span style="font-weight:bold;color:blue;">-- center
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noelFC&quot;~text~center(10)=; result~description=              <span style="font-weight:bold;color:blue;">-- forward to String</span>
T'  noelFC  '
'UTF-8 ASCII (10 graphemes, 10 codepoints, 10 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(10)=; result~description=
T'  noël👩‍👨‍👩‍👧🎅  '
'UTF-8 not-ASCII (10 graphemes, 16 codepoints, 38 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(9)=; result~description=
T' noël👩‍👨‍👩‍👧🎅  '
'UTF-8 not-ASCII (9 graphemes, 15 codepoints, 37 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(8)=; result~description=
T' noël👩‍👨‍👩‍👧🎅 '
'UTF-8 not-ASCII (8 graphemes, 14 codepoints, 36 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(7)=; result~description=
T'noël👩‍👨‍👩‍👧🎅 '
'UTF-8 not-ASCII (7 graphemes, 13 codepoints, 35 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(6)=; result~description=
T'noël👩‍👨‍👩‍👧🎅'
'UTF-8 not-ASCII (6 graphemes, 12 codepoints, 34 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(5)=; result~description=
T'noël👩‍👨‍👩‍👧'
'UTF-8 not-ASCII (5 graphemes, 11 codepoints, 30 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(4)=; result~description=
T'oël👩‍👨‍👩‍👧'
'UTF-8 not-ASCII (4 graphemes, 10 codepoints, 29 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(3)=; result~description=
T'oël'
'UTF-8 not-ASCII (3 graphemes, 3 codepoints, 4 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(2)=; result~description=
T'ël'
'UTF-8 not-ASCII (2 graphemes, 2 codepoints, 3 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(1)=; result~description=
T'ë'
'UTF-8 not-ASCII (1 grapheme, 1 codepoint, 2 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(0)=; result~description=
T''
'UTF-8 ASCII (0 grapheme, 0 codepoint, 0 byte, 0 error)'

<span style="font-weight:bold;color:blue;">-- center with pad
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;=&quot;~description=                                            <span style="font-weight:bold;color:blue;">-- 'UTF-8 ASCII (1 byte)'</span>
'UTF-8 ASCII (1 byte)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;=&quot;~c2x=                                                    <span style="font-weight:bold;color:blue;">-- '3D'</span>
'3D'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noelFC&quot;~text~center(10, &quot;=&quot;)=; result~description=         <span style="font-weight:bold;color:blue;">-- forward to String</span>
T'==noelFC=='
'UTF-8 ASCII (10 graphemes, 10 codepoints, 10 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;═&quot;~description=                                            <span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (3 bytes)'</span>
'UTF-8 not-ASCII (3 bytes)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;═&quot;~text~description=                                       <span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (1 grapheme, 1 codepoint, 3 bytes, 0 error)'</span>
'UTF-8 not-ASCII (1 grapheme, 1 codepoint, 3 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;═&quot;~c2x=                                                    <span style="font-weight:bold;color:blue;">-- 'E29590'</span>
'E29590'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noelFC&quot;~text~center(10, &quot;═&quot;)=; result~description=         <span style="font-weight:bold;color:blue;">-- don't forward to String because the pad is more than 1 byte</span>
T'══noelFC══'
'UTF-8 not-ASCII (10 graphemes, 10 codepoints, 18 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(10, &quot;═&quot;)=; result~description=
T'══noël👩‍👨‍👩‍👧🎅══'
'UTF-8 not-ASCII (10 graphemes, 16 codepoints, 46 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(9, &quot;═&quot;)=; result~description=
T'═noël👩‍👨‍👩‍👧🎅══'
'UTF-8 not-ASCII (9 graphemes, 15 codepoints, 43 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(8, &quot;═&quot;)=; result~description=
T'═noël👩‍👨‍👩‍👧🎅═'
'UTF-8 not-ASCII (8 graphemes, 14 codepoints, 40 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(7, &quot;═&quot;)=; result~description=
T'noël👩‍👨‍👩‍👧🎅═'
'UTF-8 not-ASCII (7 graphemes, 13 codepoints, 37 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~center(6, &quot;═&quot;)=; result~description=
T'noël👩‍👨‍👩‍👧🎅'
'UTF-8 not-ASCII (6 graphemes, 12 codepoints, 34 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">-- contains
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~contains(&quot;oe&quot;)=                 <span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~contains(&quot;oe&quot;~text)=            <span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~contains(&quot;oë&quot;)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~contains(&quot;oë&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~contains(&quot;oe&quot;)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~contains(&quot;oe&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~contains(&quot;oë&quot;)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~contains(&quot;oë&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>

<span style="font-weight:bold;color:blue;">-- copies
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~copies(4)=; result~description=
T'noël👩‍👨‍👩‍👧🎅noël👩‍👨‍👩‍👧🎅noël👩‍👨‍👩‍👧🎅noël👩‍👨‍👩‍👧🎅'
'UTF-8 not-ASCII (24 graphemes, 48 codepoints, 136 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">-- hashCode
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~hashCode~class=
(The String class)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~hashCode~c2x=
'8FA5DCDA35AE1A58'


<span style="font-weight:bold;color:blue;">-- length
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~length=
 6


<span style="font-weight:bold;color:blue;">-- match
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~match(2, &quot;oe&quot;)=                 <span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~match(2, &quot;oe&quot;~text)=            <span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~match(2, &quot;oë&quot;)=
 0
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~match(2, &quot;oë&quot;~text)=
 0
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(2, &quot;oe&quot;)=
 0
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(2, &quot;oe&quot;~text)=
 0
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(2, &quot;oë&quot;)=
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(2, &quot;oë&quot;~text)=
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(2, &quot;oël&quot;)=
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(2, &quot;oël&quot;~text)=
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(3, &quot;ë&quot;)=
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(3, &quot;ë&quot;~text)=
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(3, &quot;ël&quot;)=
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(3, &quot;ël&quot;~text)=
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(4, &quot;l&quot;)=
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~match(4, &quot;l&quot;~text)=
 1


<span style="font-weight:bold;color:blue;">-- matchChar
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~matchChar(3, &quot;Ee&quot;)=             <span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~matchChar(3, &quot;Ee&quot;~text)=        <span style="font-weight:bold;color:blue;">-- forward to String</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~matchChar(3, &quot;EËeë&quot;)=
<span style="font-weight:bold;color:red;">Message &quot;MATCHCHARTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~matchChar(3, &quot;EËeë&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;MATCHCHARTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~matchChar(3, &quot;EËeë&quot;)=
<span style="font-weight:bold;color:red;">Message &quot;MATCHCHARTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~matchChar(3, &quot;EËeë&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;MATCHCHARTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~matchChar(3, &quot;EËeë&quot;)=
<span style="font-weight:bold;color:red;">Message &quot;MATCHCHARTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~matchChar(4, &quot;Ll&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;MATCHCHARTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~matchChar(4, &quot;Ll&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;MATCHCHARTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>

<span style="font-weight:bold;color:blue;">-- pos
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~pos(&quot;oe&quot;)=                      <span style="font-weight:bold;color:blue;">-- forward to String</span>
 2
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~pos(&quot;oe&quot;~text)=                 <span style="font-weight:bold;color:blue;">-- forward to String</span>
 2
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~pos(&quot;oë&quot;)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~pos(&quot;oë&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~pos(&quot;oe&quot;)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~pos(&quot;oe&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~pos(&quot;oë&quot;)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~pos(&quot;oë&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~pos(&quot;l&quot;)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël&quot;~text~pos(&quot;l&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;POSTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>

<span style="font-weight:bold;color:blue;">-- subchar
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~subchar(3)=; result~description=
T'ë'
'UTF-8 not-ASCII (1 grapheme, 1 codepoint, 2 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~subchar(4)=; result~description=
T'l'
'UTF-8 ASCII (1 grapheme, 1 codepoint, 1 byte, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~subchar(5)=; result~description=
T'👩‍👨‍👩‍👧'
'UTF-8 not-ASCII (1 grapheme, 7 codepoints, 25 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">-- substr
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~substr(3, 3, &quot;x&quot;)=; result~description=    <span style="font-weight:bold;color:blue;">-- forward to String</span>
T'elx'
'UTF-8 ASCII (3 graphemes, 3 codepoints, 3 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~substr(3, 3, &quot;▷&quot;)=; result~description=        <span style="font-weight:bold;color:blue;">-- forward to String: error because the pad character is 3 bytes</span>
<span style="font-weight:bold;color:red;">Incorrect pad or character argument specified; found &quot;▷&quot;
</span><span style="font-weight:bold;color:red;">Error code= 93.922
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~substr(3, 3, &quot;▷&quot;~text)=; result~description=   <span style="font-weight:bold;color:blue;">-- forward to String: error because the pad character is not compatible with String</span>
<span style="font-weight:bold;color:red;">UTF-8 not-ASCII '▷' cannot be converted to a String instance.
</span><span style="font-weight:bold;color:red;">Error code= 23.900
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noel&quot;~text~substr(3, 3, &quot;▷&quot;)=; result~description=   <span style="font-weight:bold;color:blue;">-- no error because self is a RexxText and the pad character is one grapheme when converted to the default encoding</span>
T'el▷'
'UTF-8 not-ASCII (3 graphemes, 3 codepoints, 5 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~substr(3, 3, &quot;▷&quot;)=; result~description=
T'ël👩‍👨‍👩‍👧'
'UTF-8 not-ASCII (3 graphemes, 9 codepoints, 28 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;noël👩‍👨‍👩‍👧🎅&quot;~text~substr(3, 6, &quot;▷&quot;)=; result~description=
T'ël👩‍👨‍👩‍👧🎅▷▷'
'UTF-8 not-ASCII (6 graphemes, 12 codepoints, 38 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">-- x2c
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;F09F9180&quot;~text~x2c=
T'👀'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;not an hexadecimal value&quot;~text~x2c
<span style="font-weight:bold;color:red;">Only 0-9, a-f, A-F, and whitespace characters are valid in a hexadecimal string; character found &quot;n&quot;.
</span><span style="font-weight:bold;color:red;">Error code= 93.933
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;not an hexadecimal value 🤔&quot;~text~x2c
<span style="font-weight:bold;color:red;">UTF-8 not-ASCII 'not an ...' is not compatible with a Rexx hexadecimal value.
</span><span style="font-weight:bold;color:red;">Error code= 23.900
</span>

<span style="font-weight:bold;color:blue;">---------------------------------------------------------
</span><span style="font-weight:bold;color:blue;">-- Text encoding - Compatibility with regular expressions
</span><span style="font-weight:bold;color:blue;">---------------------------------------------------------
</span>
<span style="font-weight:bold;color:blue;">A way to test the compatibility of RexxText with String is to pass instances of
</span><span style="font-weight:bold;color:blue;">RexxText to the regular expression engine regex.cls, and see what happens...
</span>
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; p = .Pattern~compile(&quot;a.c&quot;~text)
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; p~matches(&quot;abc&quot;~text)=
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; p~matches(&quot;aôc&quot;~text)=
<span style="font-weight:bold;color:red;">Message &quot;MATCHCHARTEXT&quot; did not return a result.
</span><span style="font-weight:bold;color:red;">Error code= 91.999
</span>
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; p = .Pattern~compile(&quot;à.c&quot;~text)
<span style="font-weight:bold;color:red;">UTF-8 not-ASCII 'à' cannot be converted to a String instance.
</span><span style="font-weight:bold;color:red;">Error code= 23.900
</span>

<span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">-----------------------------------------
</span><span style="font-weight:bold;color:blue;">-- Text encoding - Compatibility with BIF
</span><span style="font-weight:bold;color:blue;">-----------------------------------------
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">[Intermediate solution]
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">Several solutions in RosettaCode are in error because the pad character used
</span><span style="font-weight:bold;color:blue;">with the function 'center' is a UTF-8 string made of several bytes.
</span><span style="font-weight:bold;color:blue;">The function center now supports utf-8 pad made of 1 grapheme.
</span><span style="font-weight:bold;color:blue;">When the pad is not a 1 byte character then the interpreter converts the string
</span><span style="font-weight:bold;color:blue;">to a RexxText and sends it the message &quot;center&quot;.
</span><span style="font-weight:bold;color:blue;">The returned value is the String associated to the RexxText.
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">The invariants of the method 'center' are true for the RexxText, but not true for
</span><span style="font-weight:bold;color:blue;">the String (which is normal).
</span>
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;═&quot;~description=                                <span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (3 bytes)'</span>
'UTF-8 not-ASCII (3 bytes)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;═&quot;~text~description=                           <span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (1 grapheme, 1 codepoint, 3 bytes, 0 error)'</span>
'UTF-8 not-ASCII (1 grapheme, 1 codepoint, 3 bytes, 0 error)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;═&quot;~c2x=                                        <span style="font-weight:bold;color:blue;">-- 'E29590'</span>
'E29590'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; center(&quot;hello&quot;, 20, &quot;═&quot;)=                       <span style="font-weight:bold;color:blue;">-- '═══════hello════════'</span>
'═══════hello════════'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; center(&quot;hello&quot;, 20, &quot;═&quot;)~text~description=      <span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (20 graphemes, 20 codepoints, 50 bytes, 0 error)'</span>
'UTF-8 not-ASCII (20 graphemes, 20 codepoints, 50 bytes, 0 error)'

<span style="font-weight:bold;color:blue;">-- Idem for the function 'left'
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; left(&quot;hello&quot;, 20, &quot;═&quot;)=                         <span style="font-weight:bold;color:blue;">-- 'hello═══════════════'</span>
'hello═══════════════'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; left(&quot;hello&quot;, 20, &quot;═&quot;)~text~description=        <span style="font-weight:bold;color:blue;">-- 'UTF-8 not-ASCII (20 graphemes, 20 codepoints, 50 bytes, 0 error)'</span>
'UTF-8 not-ASCII (20 graphemes, 20 codepoints, 50 bytes, 0 error)'


<span style="font-weight:bold;color:blue;">[General solution]
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">The new path I would like to explore is the support of graphemes by ALL the BIF...
</span><span style="font-weight:bold;color:blue;">I have already a tiny support for center() and left(), only triggered in case of
</span><span style="font-weight:bold;color:blue;">pad character made of several bytes.
</span><span style="font-weight:bold;color:blue;">
</span><span style="font-weight:bold;color:blue;">The generalization would be to route the BIF either towards String or towards RexxText,
</span><span style="font-weight:bold;color:blue;">in function of the compatibility of the arguments with String:
</span><span style="font-weight:bold;color:blue;">BIF(str1, str2, ..., strN)
</span><span style="font-weight:bold;color:blue;">    --&gt; forward to String (byte-oriented) if str's encoding is Byte or UTF-8 (with ASCII characters only)
</span><span style="font-weight:bold;color:blue;">    --&gt; forward to RexxText otherwise
</span>
<span style="font-weight:bold;color:blue;">-- UTF-8 encoding
</span>
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;Noel&quot;~isCompatibleWithByteString=              <span style="font-weight:bold;color:blue;">-- 1</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; length(&quot;Noel&quot;)=                                 <span style="font-weight:bold;color:blue;">-- 4 because &quot;Noel&quot;~length = 4</span>
 4
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;Noël&quot;~isCompatibleWithByteString=              <span style="font-weight:bold;color:blue;">-- 0</span>
 0
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; length(&quot;Noël&quot;)=                                 <span style="font-weight:bold;color:blue;">-- TODO: 4 because &quot;Noël&quot;~text~length = 4</span>
 5
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; &quot;Noël&quot;~length=                                  <span style="font-weight:bold;color:blue;">-- 5 because String remains byte-oriented, not impacted by the default encoding</span>
 5

<span style="font-weight:bold;color:blue;">-- UTF-16BE encoding
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s = &quot;0041004200430044&quot;x
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s=                                              <span style="font-weight:bold;color:blue;">-- '[00]A[00]B[00]C[00]D'</span>
'[00]A[00]B[00]C[00]D'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~isCompatibleWithByteString=                   <span style="font-weight:bold;color:blue;">-- 1</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~description=                                  <span style="font-weight:bold;color:blue;">-- 'UTF-8 ASCII (8 bytes)'</span>
'UTF-8 ASCII (8 bytes)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; length(s)=                                      <span style="font-weight:bold;color:blue;">-- 8 because encoding UTF-8 ASCII is compatible with String</span>
 8
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~encoding = &quot;UTF16&quot;
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~isCompatibleWithByteString=                   <span style="font-weight:bold;color:blue;">-- 0</span>
 0
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~description=                                  <span style="font-weight:bold;color:blue;">-- 'UTF-16BE (8 bytes)'</span>
'UTF-16BE (8 bytes)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~length=                                       <span style="font-weight:bold;color:blue;">-- 8 because String is always byte-oriented (ignores the encoding)</span>
 8
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; length(s)=                                      <span style="font-weight:bold;color:blue;">-- TODO: 4 because forwards to Text (encoding UTF-16BE is not compatible with String)</span>
 8
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~text~utf8=                                    <span style="font-weight:bold;color:blue;">-- ABCD</span>
T'ABCD'

<span style="font-weight:bold;color:blue;">-- UTF-32 encoding
</span><span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s = &quot;0000004100000042&quot;x
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s=                                              <span style="font-weight:bold;color:blue;">-- '[000000]A[000000]B'</span>
'[000000]A[000000]B'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~isCompatibleWithByteString=                   <span style="font-weight:bold;color:blue;">-- 1</span>
 1
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~description=                                  <span style="font-weight:bold;color:blue;">-- 'UTF-8 ASCII (8 bytes)'</span>
'UTF-8 ASCII (8 bytes)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; length(s)=                                      <span style="font-weight:bold;color:blue;">-- 8 because encoding UTF-8 ASCII is compatible with String</span>
 8
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~encoding = &quot;UTF32&quot;
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~isCompatibleWithByteString=                   <span style="font-weight:bold;color:blue;">-- 0</span>
 0
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~description=                                  <span style="font-weight:bold;color:blue;">-- 'UTF-32BE (8 bytes)'</span>
'UTF-32BE (8 bytes)'
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~length=                                       <span style="font-weight:bold;color:blue;">-- 8 because String is always byte-oriented (ignores the encoding)</span>
 8
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; length(s)=                                      <span style="font-weight:bold;color:blue;">-- TODO: 2 because forwards to Text (encoding UTF-32 is not compatible with String)</span>
 8
<span style="font-weight:bold;color:olive;">
</span>ooRexx[bash]&gt; s~text~utf8=                                    <span style="font-weight:bold;color:blue;">-- AB</span>
T'AB'


<span style="font-weight:bold;color:blue;">End of demonstration.
</span></pre>
</body>
</html>
