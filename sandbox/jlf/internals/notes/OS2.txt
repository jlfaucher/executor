================================================================================
29/10/2020
Mail PO

Dear all,

As an academic exercise (and with the help of Arca Noae and bww bitwise works GmbH support) I have installed ArcaOS in a VM and made friends with it. I can run rexx scripts using classic rexx and object Rexx, all is there to use. Rony reminded me how to switch between the two.

A benchmark show that Object Rexx is about 40% faster than classic Rexx

----- REXXCPS 2.1 -- Measuring REXX clauses/second -----
 REXX version is: REXXSAA 4.00 3 Feb 1999
       System is: OS/2
       Averaging: 100 measures of 100 iterations

Total (full DO): 0.0147 secs (average of 100 measures of 100 iterations)
Time for one iteration (1000 clauses) was: 0.000147 seconds

     Performance: 6802721 REXX clauses per second

[C:\workspace]switchrx
This program will now replace the current Classic REXX interpreter of OS/2
with the Object REXX interpreter.

Enter 'Y' to continue, any other input will cancel this procedure.
Y
Preparations complete. The Object REXX interpreter will be activated after
the next reboot.

<REBOOT>

[C:\workspace]rexxcps
----- REXXCPS 2.1 -- Measuring REXX clauses/second -----
 REXX version is: OBJREXX 6.00 18 May 1999
       System is: OS/2
       Averaging: 100 measures of 100 iterations

Total (full DO): 0.0107 secs (average of 100 measures of 100 iterations)
Time for one iteration (1000 clauses) was: 0.000107 seconds

     Performance: 9345794 REXX clauses per second

Once I had made some initial tests I set out to get hold of the toolchain for building ooRexx. With some help this was indeed possible:


Summary of toolchain for building ooRexx on ArcaOS (OS/2)

svn --version
svn, version 1.7.21 (r1692801)
   compiled Apr 12 2019, 19:07:53

cmake --version
cmake version 3.15.3
CMake suite maintained and supported by Kitware (kitware.com/cmake).

GNU C and C++ compiler

gcc 9.2.0
gcc-c++
libstdc++
coreutils
binutils 2.33.1

gcc --version
gcc (GCC) 9.2.0 20190812 (OS/2 RPM build 9.2.0-5.oc00)
Copyright (C) 2019 Free Software Foundation, Inc.

make --version
GNU Make 3.81
Built for i386-pc-os2-emx
Copyright (C) 2010  Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

Then I could download the source for ooRexx
svn co svn://svn.code.sf.net/p/oorexx/code-0/main/trunk oorexxSVN

But that was the end of the good news :-) Trying to build ooRexx failed, as expected I suppose:

cmake -DCMAKE_BUILD_TYPE=RELEASE -DCMAKE_INSTALL_PREFIX=~c:\ooRexx5 ..\oorexxSVN

ad94c.def && echo  >> cmTC_ad94c.def && C:/USR/BIN/cc.exe   -Zomf -Zomf -Zlinker
 DISABLE -Zlinker 1121  @CMakeFiles/cmTC_ad94c.dir/objects1.rsp -o cmTC_ad94c.ex
e   cmTC_ad94c.def
    cc.exe: schwerwiegender Fehler: Øemxomfld.exeÆ kann nicht ausgefÅhrt werden:
 spawnvp: No such file or directory
    Kompilierung beendet.
    make.exe[1]: *** [cmTC_ad94c.exe] Error 1
    make.exe[1]: Leaving directory `C:/workspace/oorexxbuild/CMakeFiles/CMakeTmp
'
    make.exe: *** [cmTC_ad94c/fast] Error 2

  CMake will not be able to correctly generate this project.
Call Stack (most recent call first):
  CMakeLists.txt:65 (project)

-- Configuring incomplete, errors occurred!
See also "C:/workspace/oorexxbuild/CMakeFiles/CMakeOutput.log".
See also "C:/workspace/oorexxbuild/CMakeFiles/CMakeError.log".

I have left all the data generated by Cmake in my dropbox under the heading OS2Builds if someone wants to have a look. Maybe Rick or Erich can give a list of what is missing to start with, if it is at all possible? It would help estimating the time&effort to setup ooRexx on OS/2.

Hälsningar/Regards/Grüsse,
P.O. Jonsson


--------------------------------------------------------------------------------
30/10/2020
Mail Erich

Hi P.O.,
    cc.exe: schwerwiegender Fehler: Øemxomfld.exeÆ kann nicht ausgefÅhrt werden: spawnvp: No such file or directory
to me ths clearly looks like an OS/2 tool chain issue and not something that can be fixed from ooRexx's side.
--------------------------------------------------------------------------------
30/10/2020
Mail PO

Hi Erich,

I did not expect any problems from the ooRexx side ;-) this was only the first run of the complete toolchain.

I will go after emxomfld.exe and spawnvp then and see where they are used. I can see that the OS is detected as i386 whereas I have some of the tools as i686 (newer hardware as it is branded) I will let you know if I have further progress.

This might not be the right place to post but my hunch was that there are a lot of OS/2 foxes monitoring this list so…

The initial lines of CMakeOutput.log looks promising though:

The system is: OS2 -  - i386
Compiling the C compiler identification source file "CMakeCCompilerId.c" succeeded.
Compiler: C:/USR/BIN/cc.exe
Build flags:
Id flags: -c

The output was:
0

Compilation of the C compiler identification source "CMakeCCompilerId.c" produced "CMakeCCompilerId.o"

The C compiler identification is GNU, found in "C:/workspace/oorexxbuild/CMakeFiles/3.15.3/CompilerIdC/CMakeCCompilerId.o"

Compiling the CXX compiler identification source file "CMakeCXXCompilerId.cpp" succeeded.
Compiler: C:/USR/BIN/c++.exe
Build flags:
Id flags: -c

The output was:
0

--------------------------------------------------------------------------------
04/11/2020
Mail PO

For information I now have a working (partly) toolchain to build ooRexx on ArcaOS. I can now run Cmake and it finishes as it normally does, here the info

-- CMake version is 3.15.3
-- Building for a 32-bit architecture
-- OOREXX_SHEBANG_PROGRAM: "/usr/bin/env rexx" (default)
-- SVN Revision Number is 12122
-- CMAKE_INSTALL_PREFIX is /usr
-- INSTALL_LIB_DIR is /usr/lib
-- Configuring done
-- Generating done
-- Build files have been written to: C:/workspace/oorexxbuild

So all (maybe not all?) the build files are generated, but the next step to run make or make install fails.

I will continue investigating. Any hints are welcome.

